(function(addon){var component;if(window.UIkit){component=addon(UIkit)}if(typeof define=="function"&&define.amd){define("uikit-notify",["uikit"],function(){return component||addon(UIkit)})}})(function(UI){"use strict";var containers={},messages={},notify=function(options){if(UI.$.type(options)=="string"){options={message:options}}if(arguments[1]){options=UI.$.extend(options,UI.$.type(arguments[1])=="string"?{status:arguments[1]}:arguments[1])}return new Message(options).show()},closeAll=function(group,instantly){var id;if(group){for(id in messages){if(group===messages[id].group)messages[id].close(instantly)}}else{for(id in messages){messages[id].close(instantly)}}};var Message=function(options){this.options=UI.$.extend({},Message.defaults,options);this.uuid=UI.Utils.uid("notifymsg");this.element=UI.$(['<div class="uk-notify-message">','<a class="uk-close"></a>',"<div></div>","</div>"].join("")).data("notifyMessage",this);this.content(this.options.message);if(this.options.status){this.element.addClass("uk-notify-message-"+this.options.status);this.currentstatus=this.options.status}this.group=this.options.group;messages[this.uuid]=this;if(!containers[this.options.pos]){containers[this.options.pos]=UI.$('<div class="uk-notify uk-notify-'+this.options.pos+'"></div>').appendTo("body").on("click",".uk-notify-message",function(){var message=UI.$(this).data("notifyMessage");message.element.trigger("manualclose.uk.notify",[message]);message.close()})}};UI.$.extend(Message.prototype,{uuid:false,element:false,timout:false,currentstatus:"",group:false,show:function(){if(this.element.is(":visible"))return;var $this=this;containers[this.options.pos].show().prepend(this.element);var marginbottom=parseInt(this.element.css("margin-bottom"),10);this.element.css({opacity:0,marginTop:-1*this.element.outerHeight(),marginBottom:0}).animate({opacity:1,marginTop:0,marginBottom:marginbottom},function(){if($this.options.timeout){var closefn=function(){$this.close()};$this.timeout=setTimeout(closefn,$this.options.timeout);$this.element.hover(function(){clearTimeout($this.timeout)},function(){$this.timeout=setTimeout(closefn,$this.options.timeout)})}});return this},close:function(instantly){var $this=this,finalize=function(){$this.element.remove();if(!containers[$this.options.pos].children().length){containers[$this.options.pos].hide()}$this.options.onClose.apply($this,[]);$this.element.trigger("close.uk.notify",[$this]);delete messages[$this.uuid]};if(this.timeout)clearTimeout(this.timeout);if(instantly){finalize()}else{this.element.animate({opacity:0,marginTop:-1*this.element.outerHeight(),marginBottom:0},function(){finalize()})}},content:function(html){var container=this.element.find(">div");if(!html){return container.html()}container.html(html);return this},status:function(status){if(!status){return this.currentstatus}this.element.removeClass("uk-notify-message-"+this.currentstatus).addClass("uk-notify-message-"+status);this.currentstatus=status;return this}});Message.defaults={message:"",status:"",timeout:5e3,group:null,pos:"top-center",onClose:function(){}};UI.notify=notify;UI.notify.message=Message;UI.notify.closeAll=closeAll;return notify});
(function(addon){var component;if(window.UIkit){component=addon(UIkit)}if(typeof define=="function"&&define.amd){define("uikit-slider",["uikit"],function(){return component||addon(UIkit)})}})(function(UI){"use strict";var dragging,delayIdle,anchor,dragged,store={};UI.component("slider",{defaults:{center:false,threshold:10,infinite:true,autoplay:false,autoplayInterval:7e3,pauseOnHover:true,activecls:"uk-active"},boot:function(){UI.ready(function(context){setTimeout(function(){UI.$("[data-uk-slider]",context).each(function(){var ele=UI.$(this);if(!ele.data("slider")){UI.slider(ele,UI.Utils.options(ele.attr("data-uk-slider")))}})},0)})},init:function(){var $this=this;this.container=this.element.find(".uk-slider");this.focus=0;UI.$win.on("resize load",UI.Utils.debounce(function(){$this.update(true)},100));this.on("click.uk.slider","[data-uk-slider-item]",function(e){e.preventDefault();var item=UI.$(this).attr("data-uk-slider-item");if($this.focus==item)return;$this.stop();switch(item){case"next":case"previous":$this[item=="next"?"next":"previous"]();break;default:$this.updateFocus(parseInt(item,10))}});this.container.on({"touchstart mousedown":function(evt){if(evt.originalEvent&&evt.originalEvent.touches){evt=evt.originalEvent.touches[0]}if(evt.button&&evt.button==2||!$this.active){return}$this.stop();anchor=UI.$(evt.target).is("a")?UI.$(evt.target):UI.$(evt.target).parents("a:first");dragged=false;if(anchor.length){anchor.one("click",function(e){if(dragged)e.preventDefault()})}delayIdle=function(e){dragged=true;dragging=$this;store={touchx:parseInt(e.pageX,10),dir:1,focus:$this.focus,base:$this.options.center?"center":"area"};if(e.originalEvent&&e.originalEvent.touches){e=e.originalEvent.touches[0]}dragging.element.data({"pointer-start":{x:parseInt(e.pageX,10),y:parseInt(e.pageY,10)},"pointer-pos-start":$this.pos});$this.container.addClass("uk-drag");delayIdle=false};delayIdle.x=parseInt(evt.pageX,10);delayIdle.threshold=$this.options.threshold},mouseenter:function(){if($this.options.pauseOnHover)$this.hovering=true},mouseleave:function(){$this.hovering=false}});this.update(true);this.on("display.uk.check",function(){if($this.element.is(":visible")){$this.update(true)}});this.element.find("a,img").attr("draggable","false");if(this.options.autoplay){this.start()}UI.domObserve(this.element,function(e){if($this.element.children(":not([data-slider-slide])").length){$this.update(true)}})},update:function(focus){var $this=this,pos=0,maxheight=0,item,width,cwidth,size;this.items=this.container.children().filter(":visible");this.vp=this.element[0].getBoundingClientRect().width;this.container.css({"min-width":"","min-height":""});this.items.each(function(idx){item=UI.$(this).attr("data-slider-slide",idx);size=item.css({left:"",width:""})[0].getBoundingClientRect();width=size.width;cwidth=item.width();maxheight=Math.max(maxheight,size.height);item.css({left:pos,width:width}).data({idx:idx,left:pos,width:width,cwidth:cwidth,area:pos+width,center:pos-($this.vp/2-cwidth/2)});pos+=width});this.container.css({"min-width":pos,"min-height":maxheight});if(this.options.infinite&&(pos<=2*this.vp||this.items.length<5)&&!this.itemsResized){this.container.children().each(function(idx){$this.container.append($this.items.eq(idx).clone(true).attr("id",""))}).each(function(idx){$this.container.append($this.items.eq(idx).clone(true).attr("id",""))});this.itemsResized=true;return this.update()}this.cw=pos;this.pos=0;this.active=pos>=this.vp;this.container.css({"-ms-transform":"","-webkit-transform":"",transform:""});if(focus)this.updateFocus(this.focus)},updatePos:function(pos){this.pos=pos;this.container.css({"-ms-transform":"translateX("+pos+"px)","-webkit-transform":"translateX("+pos+"px)",transform:"translateX("+pos+"px)"})},updateFocus:function(idx,dir){if(!this.active){return}dir=dir||(idx>this.focus?1:-1);var item=this.items.eq(idx),area,i;if(this.options.infinite){this.infinite(idx,dir)}if(this.options.center){this.updatePos(item.data("center")*-1);this.items.filter("."+this.options.activecls).removeClass(this.options.activecls);item.addClass(this.options.activecls)}else{if(this.options.infinite){this.updatePos(item.data("left")*-1)}else{area=0;for(i=idx;i<this.items.length;i++){area+=this.items.eq(i).data("width")}if(area>this.vp){this.updatePos(item.data("left")*-1)}else{if(dir==1){area=0;for(i=this.items.length-1;i>=0;i--){area+=this.items.eq(i).data("width");if(area==this.vp){idx=i;break}if(area>this.vp){idx=i<this.items.length-1?i+1:i;break}}if(area>this.vp){this.updatePos((this.container.width()-this.vp)*-1)}else{this.updatePos(this.items.eq(idx).data("left")*-1)}}}}}var left=this.items.eq(idx).data("left");this.items.removeClass("uk-slide-before uk-slide-after").each(function(i){if(i!==idx){UI.$(this).addClass(UI.$(this).data("left")<left?"uk-slide-before":"uk-slide-after")}});this.focus=idx;this.trigger("focusitem.uk.slider",[idx,this.items.eq(idx),this])},next:function(){var focus=this.items[this.focus+1]?this.focus+1:this.options.infinite?0:this.focus;this.updateFocus(focus,1)},previous:function(){var focus=this.items[this.focus-1]?this.focus-1:this.options.infinite?this.items[this.focus-1]?this.items-1:this.items.length-1:this.focus;this.updateFocus(focus,-1)},start:function(){this.stop();var $this=this;this.interval=setInterval(function(){if(!$this.hovering)$this.next()},this.options.autoplayInterval)},stop:function(){if(this.interval)clearInterval(this.interval)},infinite:function(baseidx,direction){var $this=this,item=this.items.eq(baseidx),i,z=baseidx,move=[],area=0;if(direction==1){for(i=0;i<this.items.length;i++){if(z!=baseidx){area+=this.items.eq(z).data("width");move.push(this.items.eq(z))}if(area>this.vp){break}z=z+1==this.items.length?0:z+1}if(move.length){move.forEach(function(itm){var left=item.data("area");itm.css({left:left}).data({left:left,area:left+itm.data("width"),center:left-($this.vp/2-itm.data("cwidth")/2)});item=itm})}}else{for(i=this.items.length-1;i>-1;i--){area+=this.items.eq(z).data("width");if(z!=baseidx){move.push(this.items.eq(z))}if(area>this.vp){break}z=z-1==-1?this.items.length-1:z-1}if(move.length){move.forEach(function(itm){var left=item.data("left")-itm.data("width");itm.css({left:left}).data({left:left,area:left+itm.data("width"),center:left-($this.vp/2-itm.data("cwidth")/2)});item=itm})}}}});UI.$doc.on("mousemove.uk.slider touchmove.uk.slider",function(e){if(e.originalEvent&&e.originalEvent.touches){e=e.originalEvent.touches[0]}if(delayIdle&&Math.abs(e.pageX-delayIdle.x)>delayIdle.threshold){if(!window.getSelection().toString()){delayIdle(e)}else{dragging=delayIdle=false}}if(!dragging){return}var x,xDiff,pos,dir,focus,item,next,diff,i,z,itm;if(e.clientX||e.clientY){x=e.clientX}else if(e.pageX||e.pageY){x=e.pageX-document.body.scrollLeft-document.documentElement.scrollLeft}focus=store.focus;xDiff=x-dragging.element.data("pointer-start").x;pos=dragging.element.data("pointer-pos-start")+xDiff;dir=x>dragging.element.data("pointer-start").x?-1:1;item=dragging.items.eq(store.focus);if(dir==1){diff=item.data("left")+Math.abs(xDiff);for(i=0,z=store.focus;i<dragging.items.length;i++){itm=dragging.items.eq(z);if(z!=store.focus&&itm.data("left")<diff&&itm.data("area")>diff){focus=z;break}z=z+1==dragging.items.length?0:z+1}}else{diff=item.data("left")-Math.abs(xDiff);for(i=0,z=store.focus;i<dragging.items.length;i++){itm=dragging.items.eq(z);if(z!=store.focus&&itm.data("area")<=item.data("left")&&itm.data("center")<diff){focus=z;break}z=z-1==-1?dragging.items.length-1:z-1}}if(dragging.options.infinite&&focus!=store._focus){dragging.infinite(focus,dir)}dragging.updatePos(pos);store.dir=dir;store._focus=focus;store.touchx=parseInt(e.pageX,10);store.diff=diff});UI.$doc.on("mouseup.uk.slider touchend.uk.slider",function(e){if(dragging){dragging.container.removeClass("uk-drag");dragging.items.eq(store.focus);var itm,focus=false,i,z;if(store.dir==1){for(i=0,z=store.focus;i<dragging.items.length;i++){itm=dragging.items.eq(z);if(z!=store.focus&&itm.data("left")>store.diff){focus=z;break}z=z+1==dragging.items.length?0:z+1}if(!dragging.options.infinite&&!focus){focus=dragging.items.length}}else{for(i=0,z=store.focus;i<dragging.items.length;i++){itm=dragging.items.eq(z);if(z!=store.focus&&itm.data("left")<store.diff){focus=z;break}z=z-1==-1?dragging.items.length-1:z-1}if(!dragging.options.infinite&&!focus){focus=0}}dragging.updateFocus(focus!==false?focus:store._focus)}dragging=delayIdle=false});return UI.slider});
var PA=PA||{};PA.details={bindTabs2:function(classifiedId){$("#classifiedTabs a span").on("click",function(e){e.preventDefault();$("#classifiedTabs a").removeClass("active");$(this).parent().addClass("active");if($(this).parent().hasClass("active")){return}else{var tab=$(this).data("tab");console.log(tab)}})},bindTabs:function(classifiedId){$("#classifiedTabs a").on("click",function(){$("#classifiedTabs a").removeClass("active");$(this).addClass("active")});$("#classifiedTabs a span").on("click",function(){var tabHolder=$(".js-tab-content");var classifiedHolder=$(".js-tab-classified-content");var tab=$(this).parent().data()["tab"];if($(this).hasClass("active")){return}console.log(tab);$(".js-tabs-holder > div.classifiedTabs a span").removeClass("active");$(this).parent().addClass("active");if($(window).width()<769){switch(tab){case"classified":classifiedHolder.removeClass("uk-hidden");ga("send","event","Oglas","click","Klik na tab Oglas");break;case"model":tabHolder.removeClass("uk-hidden");tabHolder.empty().load("/ClassifiedDetails/modelInfo/"+classifiedId);ga("send","event","Oglas","click","Klik na tab O modelu");break;case"driver-impressions":tabHolder.removeClass("uk-hidden");tabHolder.empty().load("/ClassifiedDetails/reviews/"+classifiedId);ga("send","event","Oglas","click","Klik na tab Utisci");break}}else{switch(tab){case"classified":tabHolder.addClass("uk-hidden");classifiedHolder.removeClass("uk-hidden");ga("send","event","Oglas","click","Klik na tab Oglas");break;case"model":tabHolder.removeClass("uk-hidden");classifiedHolder.addClass("uk-hidden");tabHolder.empty().load("/ClassifiedDetails/modelInfo/"+classifiedId);ga("send","event","Oglas","click","Klik na tab O modelu");break;case"driver-impressions":tabHolder.removeClass("uk-hidden");classifiedHolder.addClass("uk-hidden");tabHolder.empty().load("/ClassifiedDetails/reviews/"+classifiedId);ga("send","event","Oglas","click","Klik na tab Utisci");break}}})},bindModelInfo:function(classifiedId,$switch,$tabContent){$switch.on("change",function(){$tabContent.empty().load("/ClassifiedDetails/modelInfo/"+classifiedId+"?generation="+$switch.val())})},reportLink:function(classifiedId,url,csrf_token){PA.common.loaderStart();$.post("/ClassifiedDetails/modelInfo/"+classifiedId+"/reportLink",{url:url,csrf_token:csrf_token},function(){PA.common.loaderStop();UIkit.modal.alert("Hvala vam što ste prijavili link kao neispravan. Nakon provere, link će biti uklonjen")})},addNewLink:function(classifiedId){UIkit.modal.confirm($("#addNewLink").html(),function(){var url=$("#suggestedUrl").val();var email=$("#suggestedEmail").val();$.get("/ClassifiedDetails/modelInfo/"+classifiedId+"/suggestRelatedLink",{url:url,email:email},function(){UIkit.modal.alert("Hvala vam što ste predložili novi link. Nakon provere, link će biti vidljiv svim korisnicima.",{labels:{Ok:"U redu"}})})},{labels:{Ok:"Pošalji",Cancel:"Odustani"},bgclose:true})},declension:function(number,v1,v234,v5etc){var noun="";if(number>0){number=number+"";var last_digit=number.slice(-1);if(number.length>1){var almost_last_digit=number.substr(number.length-2,1);if(almost_last_digit==1){last_digit=5}}if(last_digit==1){noun=v1}else{if(last_digit==2||last_digit==3||last_digit==4){noun=v234}else{noun=v5etc}}}else{noun=v5etc}return noun},showSocialProof:function(total,isPermanent){UIkit.notify({message:"Ovaj oglas trenutno "+PA.details.declension(total,"gleda","gledaju","gleda")+" "+total+" "+PA.details.declension(total,"osoba","osobe","osoba"),status:"info",timeout:isPermanent?0:5e3,pos:"bottom-left"});$(".uk-close").css("margin-top","3px")},hideSocialProof:function(){$(".uk-notify").hide()},incViewers:function(total){$(".uk-notify-message div").text("Ovaj oglas trenutno "+PA.details.declension(total,"gleda","gledaju","gleda")+" "+total+" "+PA.details.declension(total,"osoba","osobe","osoba"))},pickClassified:function(classifiedId,csrf_token,callback){$.post("/classifieds/"+classifiedId+"/pick",{csrf_token:csrf_token},callback,"json")},unPickClassified:function(classifiedId,csrf_token,callback){$.ajax({type:"DELETE",url:"/classifieds/"+classifiedId+"/pick",data:{csrf_token:csrf_token},success:callback,dataType:"json"})},priceChangeFollow:function(classifiedId,csrf_token,callback){$.post("/classifieds/"+classifiedId+"/priceChange",{csrf_token:csrf_token},callback,"json")},priceChangeUnFollow:function(classifiedId,csrf_token,callback){$.ajax({type:"DELETE",url:"/classifieds/"+classifiedId+"/priceChange",data:{csrf_token:csrf_token},success:callback,dataType:"json"})},userPickedNoteSubmission:function(classifiedId,note){$.post("/classifieds/picked/note",$("#update-consent-data-form input:checked").serialize());$.post("/classifieds/picked/note",{note:note,classifiedId:classifiedId})},showPickedModal:function(classifiedId,category,csrf_token){$.post("/ClassifiedDetails/pickedModal",{classifiedId:classifiedId,category:category},function(response){if(response.success){var confirmCallback=function(){var note=$("#user_picked_note").val();PA.details.userPickedNoteSubmission(classifiedId,note);var followPriceChange=$(".price_change_notify").first().is(":checked");if(followPriceChange){PA.details.priceChangeFollow(classifiedId,csrf_token,null)}else{PA.details.priceChangeUnFollow(classifiedId,csrf_token,null)}};UIkit.modal.confirm(response.html,confirmCallback,{labels:{Ok:"U redu",Cancel:"Zatvori"}})}})},bindPickTool:function($wrapper,classifiedId,csrf_token,category){$wrapper.on("click",".js-not-picked",function(){var btn_text=$(".js-not-picked .classified-liked");if($(this).hasClass("js-picked-sticky-header")){ga("send","event","Oglas","click","Klik na srce za praćenje oglasa u sticky header-u",{nonInteraction:1});$(this).removeClass("js-picked-sticky-header")}else if($(this).hasClass("js-picked-sticky-footer")){ga("send","event","Oglas","click","Klik na srce za praćenje oglasa u sticky footer-u",{nonInteraction:1});$(this).removeClass("js-picked-sticky-footer")}else{ga("send","event","Oglas","click","Klik na srce za praćenje oglasa",{nonInteraction:1})}PA.details.pickClassified(classifiedId,csrf_token,function(response){if(response.success){$(".js-not-picked").each(function(key,element){$(element).removeClass("js-not-picked").addClass("js-picked selected").prop("title","Prestani sa praćenjem")});PA.details.showPickedModal(classifiedId,category,csrf_token);btn_text.text(response.pickCount["pickCount"]+1)}});window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:"Klik na srce za praćenje oglasa"})});$wrapper.on("click",".js-picked",function(){var btn_text=$(".js-picked .classified-liked");PA.details.unPickClassified(classifiedId,csrf_token,function(response){if(response.success){$(".js-picked").each(function(key,element){$(element).removeClass("js-picked selected").addClass("js-not-picked").prop("title","Prati ovaj oglas");if($(this).parent().hasClass("js-sticky-header")){$(this).addClass("js-picked-sticky-header")}else if($(this).parent().hasClass("js-sticky-footer")){$(this).addClass("js-picked-sticky-footer")}});if(response.pickCount["pickCount"]===1){btn_text.text("")}else{btn_text.text(response.pickCount["pickCount"]-1)}}});ga("send","event","Oglas","click","Alatke - Prestanak praćenja oglasa");window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:"Alatke - Prestanak praćenja oglasa"})})},isOnline:function(server,ownerId){var ws=new WebSocket(server);ws.onopen=function(){ws.send(JSON.stringify({userId:ownerId,type:"check"}))};ws.onmessage=function(message){var isOnline=$(".js-isOnline");var data=JSON.parse(message.data);if(data.userConnectionStatus=="online"){isOnline.removeClass("uk-hidden")}else{isOnline.addClass("uk-hidden")}}},socialProof:function(server){if("WebSocket"in window){var ws=new WebSocket(server),popupVisible=false;ws.onmessage=function(event){var count=parseInt(event.data.split(":")[1]);if(count>1){if(count<4){if(popupVisible){PA.details.hideSocialProof()}PA.details.showSocialProof(count,false)}else{if(popupVisible){PA.details.incViewers(count)}else{popupVisible=true;PA.details.showSocialProof(count,true)}}}}}},bindPriceOffer:function(classifiedId,$form,csrf_token){$form.on("submit",function(event){event.preventDefault();var $price=$(".js-price",$form);if($.trim($price.val())==""){$price.focus();return}$(":input",$form).prop("disabled",true);$.post("/classified/"+classifiedId+"/priceOffer",{price:$price.val(),csrf_token:csrf_token},function(response){if(response.login==false){var hrefLogin=$(".js-price-offer-dialog .js-login");hrefLogin.attr("href",hrefLogin.attr("href")+$price.val());UIkit.modal.dialog($(".js-price-offer-dialog").html()).show()}else if(response.error==false){$form.hide();UIkit.modal.alert("Ponuda poslata!",{labels:{Ok:"U redu"}})}},"json")})},mapModal:function(address,lat,long,$info){UIkit.modal.dialog($('<a class="uk-modal-close uk-close"></a><div class="uk-clearfix"></div><div id="google-maps-holder" style="height: 500px;"></div>')).show();this.$mapWrapper=$("#google-maps-holder");var location=new google.maps.LatLng(lat,long),map=new google.maps.Map(this.$mapWrapper[0],{zoom:15,center:location,disableDefaultUI:true,mapTypeId:google.maps.MapTypeId.ROADMAP}),marker=new google.maps.Marker({position:location,map:map,icon:"/images/icons/car-marker.png"}),infoWindow=new google.maps.InfoWindow({content:'<dl class="google-map-info">'+$info.html()+"</dl>",maxWidth:410});this.mapInfo=function(){infoWindow.open(map,marker)};google.maps.event.addListener(marker,"click",this.mapInfo);google.maps.event.addListenerOnce(map,"idle",PA.details.mapInfo())},bindShowNumbers:function(){var last24check=document.referrer.match(/poslednja24h/);if(!!last24check&&last24check.length==1){$(".ga-phone-number").data("action","last24click");$(".js-owner-contact").data("action","last24click")}$("body").on("click","div.js-show-phone",function(){var data=$(this).data();$(".js-show-phone").hide();$(".evaluateSeller").slideDown(500);PA.details.logShowNumber(data["id"],data["adcategory"],data["categoryname"]);PA.details.pushDatapoint("show","kontakt podaci"," / klik da vidiš broj")});$("div.js-show-phone").siblings().on("click",function(){PA.details.pushDatapoint("choose","kontakt podaci","broj telefona")});$(".js-openContactDialog").on("click",function(){var data=$(this).data();PA.details.logShowNumber(data["id"],data["adcategory"],data["categoryname"]);PA.details.pushDatapoint("show","sticky footer","Pozovi")});$(".js-click-phone").on("click",function(){PA.details.pushDatapoint("choose","sticky footer","broj telefona")})},pushDatapoint:function(action,placement,label){var uuid,i,j;uuid="";for(j=0;j<32;j++){if(j==8||j==12||j==16||j==20){uuid=uuid+"-"}i=Math.floor(Math.random()*16).toString(16).toUpperCase();uuid=uuid+i}var currentdate=new Date;var datetime=currentdate.getFullYear()+"-"+(currentdate.getMonth()+1)+"-"+currentdate.getDate()+" "+currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds();dataLayer.push({event:"contact",datapoint_uuid:uuid,datapoint_timestamp:datetime,datapoint_type:"poziv",datapoint_subtype:"oglas",datapoint_action:action,datapoint_placement:placement,datapoint_label:label,environment_url:location.href,environment_http_referer:document.referrer})},logShowNumber:function(classifiedId,category,categoryName){$.post("/ClassifiedDetails/phoneNumberClick",{classifiedId:classifiedId});dataLayer.push({source:"oglas",event:"klik na telefon - oglas "+categoryName})},initGalleryMobile:function(images){var lightSlider=$("#image-gallery-mobile");var slider=lightSlider.lightSlider({gallery:true,mode:"gallery",item:1,thumbItem:4,slideMargin:0,speed:500,auto:false,loop:true,adaptiveHeight:true,keyPress:true,freeMove:true,onSliderLoad:function(el){$("#image-gallery-mobile").removeClass("cS-hidden");$(".js-gallery-numbers").removeClass("uk-hidden");$(".spinner-gallery").detach();$(".discount-banner-classified").fadeIn();el.lightGallery({selector:"#image-gallery-mobile .lslide",mode:"lg-fade",showThumbByDefault:false});PA.details.loadImage($(".js-gallery-image").eq(1));PA.details.loadImage($(".js-gallery-image").eq(2));PA.details.loadImage($(".js-gallery-image").eq(el.getTotalSlideCount()-1))},onAfterSlide:function(el){var curSlide=$("ul li.active").index()+1;if(curSlide>images){curSlide=1}if(curSlide==0){curSlide=1}$(".js-current-gallery-position").text(curSlide);var curImage=$(".js-gallery-image").eq(curSlide-1);if(curImage.hasClass("js-not-loaded")){PA.details.loadImage(curImage,el)}var nextImage=$(".js-gallery-image").eq(curSlide);PA.details.loadImage(nextImage);var secondNextImage=$(".js-gallery-image").eq(curSlide+1);PA.details.loadImage(secondNextImage)},onBeforePrevSlide:function(el){if(el.getCurrentSlideCount()==1){el.goToSlide(el.getTotalSlideCount());var imageToLoad=$(".js-gallery-image").eq(el.getTotalSlideCount()-2);PA.details.loadImage(imageToLoad)}else{var counter=el.getCurrentSlideCount()-3;if(counter>0){var imageToLoad=$(".js-gallery-image").eq(el.getCurrentSlideCount()-3);PA.details.loadImage(imageToLoad)}}}});$("#content-slider").lightSlider({keyPress:false,item:4,loop:true,onSliderLoad:function(){$("#content-slider").removeClass("cS-hidden")}})},loadImage:function(image,slider){var slider=slider||false;if(image.hasClass("js-not-loaded")){var imageData=image.data();var imageSrc=imageData["src"];image.attr("src",imageSrc);image.removeAttr("data-src");image.on("load",function(){image.removeClass("js-not-loaded");if(slider!=false){slider.refresh()}})}},initGallery:function(images){var lightSlider=$("#image-gallery");var slider=lightSlider.lightSlider({gallery:true,mode:"gallery",item:1,thumbItem:6,slideMargin:0,speed:500,auto:false,loop:true,adaptiveHeight:false,keyPress:true,freeMove:true,onSliderLoad:function(el){$("#image-gallery").removeClass("cS-hidden");$(".js-gallery-numbers").removeClass("uk-hidden");$(".spinner-gallery").detach();$(".discount-banner-classified").fadeIn();el.lightGallery({selector:"#image-gallery .lslide",mode:"lg-fade",showThumbByDefault:false})},onAfterSlide:function(){var curSlide=$("ul li.active").index()+1;if(curSlide>images){curSlide=1}if(curSlide==0){curSlide=1}$(".js-current-gallery-position").text(curSlide)},onBeforePrevSlide:function(el){if(el.getCurrentSlideCount()==1){el.goToSlide(el.getTotalSlideCount())}}});$("#content-slider").lightSlider({keyPress:false,item:4,loop:true,onSliderLoad:function(){$("#content-slider").removeClass("cS-hidden")}})},setGalleryPosition:function(){$(".lslide img").each(function(){$(this).imagesLoaded().always(function(image){image=image["images"][0]["img"];if($(image).height()<585){var offset=(585-$(image).height())/2;$(image).css("margin-top",offset)}else{$(image).css("margin-top","0")}})})},toggleMoreInfo:function(){if($(window).width()<768){$(".js-title-toggle").on("click",function(){var more_info=$(this);if(more_info.next(".js-hidden").is(":hidden")){window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:"Klik na akordion",accordion_name:more_info.text().trim()});more_info.next(".js-hidden").slideDown();more_info.children("i.uk-icon").toggleClass("rotate");more_info.children("i.uk-icon").removeClass("rotate2");ga("send","event","Oglas","click","Klik na akordion "+more_info.text().trim())}else{more_info.next(".js-hidden").slideUp();more_info.children("i.uk-icon").toggleClass("rotate2");more_info.children("i.uk-icon").removeClass("rotate")}})}},bindDeleteAd:function(classifiedId,status,csrf_token){PA.tools.classifiedDelete(classifiedId,status,csrf_token,function(){PA.tools.showXLPoll(classifiedId);if(status!="waitingPayment"&&status!="sold"){PA.tools.classifiedDeleteSurvey(classifiedId,csrf_token,function(){window.location="/redirect/aktivni-oglasi"})}})},bindReviews:function($switch,$iframe){$switch.on("change",function(){$iframe.attr("src","https://www.mojagaraza.rs/widget/pa/reviews?url="+$("option:selected",$switch).data("url"))})},addToHistory:function(classifiedId,title){if(typeof Storage==="undefined"){return}var historyAds=JSON.parse(localStorage.getItem("history"));var historyCount=historyAds==null?0:Object.keys(historyAds).length;var data={};var x=0;if(historyCount==5){delete historyAds[0]}if(historyCount>5){historyCount=0;historyAds={}}if(historyCount>0){Object.keys(historyAds).forEach(function(key){if(historyAds[key].classifiedId!=classifiedId){data[x]=historyAds[key];x++}})}data[x]={classifiedId:classifiedId,title:title,url:location.protocol+"//"+location.host+location.pathname};localStorage.setItem("history",JSON.stringify(data))},loadImagesOnPageLoad:function(counter){$(function(){var imageListLength=$(".js_counter").length;if(counter>imageListLength){return}var i=$("#classifiedIMG_"+counter);var data=i.data();i.on("load",function(){PA.details.loadImagesOnPageLoad(counter+1)});if(typeof i!=="undefined"){i.attr("src",data.src)}})},toggleInterested:function(csrf_token,categoryName){$(".js-interested").on("click",function(){$.cookie("usedInterested",1,{path:"/",expires:365*100});var data=$(this).data();var classifiedId=data["classifiedid"];var action=data["action"];if(action=="on"){window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:"Zainteresovan za kupovinu - pracenje"});ga("send","event","Oglas","click","Zainteresovan za kupovinu - pracenje "+categoryName);PA.common.loaderStart();$.post("/classifieds/"+classifiedId+"/interested",{csrf_token:csrf_token},function(data){if(data.success==true){PA.details.reloadNotCached();PA.common.loaderStop();var confirmCallback=function(){var note=$(".user_interested_note").get(1).value;PA.details.userPickedNoteSubmission(classifiedId,note)};var modalResponse=UIkit.modal.confirm($("#success-interested-message").html(),confirmCallback,{labels:{Ok:"U redu",Cancel:"Zatvori"}});modalResponse.on("hide.uk.modal",function(){$.get("/user/contactData/showPopUp",function(response){if(response.showPopup===true){PA.user.showUserContactDataModal()}})})}else{PA.common.loaderStop();UIkit.modal.alert("Došlo je do greške.",{labels:{Ok:"U redu"}})}})}else if(action=="off"){window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:"Zainteresovan za kupovinu - otpratio"});ga("send","event","Oglas","click","Zainteresovan za kupovinu - otpratio "+categoryName);PA.common.loaderStart();$.ajax({url:"/classifieds/"+classifiedId+"/interested",type:"DELETE",data:{csrf_token:csrf_token},success:function(data){if(data.success==true){PA.details.reloadNotCached();PA.common.loaderStop()}else{PA.common.loaderStop();UIkit.modal.alert("Došlo je do greške.")}}})}else{window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:"Zainteresovan za kupovinu - neulogovan - pracenje"});ga("send","event","Oglas","click","Zainteresovan za kupovinu - neulogovan - pracenje "+categoryName)}})},alreadyInterestedWarning:function(){UIkit.modal.alert('Već si označio da si zainteresovan za kupovinu i oglas se nalazi u tvom profilu na stranici <a href="/redirect/oglasi-koje-pratim">Oglasi koje pratim.</a>',{labels:{Ok:"U redu"}})},relatedPromotion:function(){$("body").append('<div class="position-absolute js-overly relatedPromorionOverlay"></div>');var cBlock=$("#cBlock");$("body").append(cBlock);$(window).scroll(function(){if(typeof $.cookie("relatedPromotion")=="undefined"){$.cookie("relatedPromotion",1,{path:"/",expires:7});$("html").animate({scrollTop:$("#relatedClassifieds").offset().top-150},1e3);$(".js-overly").fadeIn(50);$("#js-related-notification").fadeIn(50);$("#relatedClassifieds").addClass("position-relative")}});$(".js-closeRelated").on("click",function(){$(".js-overly").fadeOut(200);$("#js-related-notification").hide();$("#relatedClassifieds").removeClass("position-relative");$.cookie("relatedPromotion",1,{path:"/",expires:7})});$(".js_typeform-share").on("click",function(){$(".js-overly").fadeOut(200);$("#js-related-notification").hide();$("#relatedClassifieds").removeClass("position-relative");$.cookie("relatedPromotion",1,{path:"/",expires:365*100})})},reloadNotCached:function(){var notCachedHolder=$("#not-cached-holder");var data=notCachedHolder.data();$.get("/classifiedDetails/notCached/"+data["classifiedid"]+"/"+data["status"],function(data){notCachedHolder.html(data)})},autoFormatCreditWidgetNumbers:function(selector){$(selector).on("keyup",function(event){var $this=$(this);var selection=window.getSelection().toString();if(selection!==""){return}if($.inArray(event.keyCode,[38,40,37,39])!==-1){return}var input=$this.val();input=input.replace(/[\D\s\._\-]+/g,"");input=input?parseInt(input,10):0;$this.val(function(){return input===0?"":input.toLocaleString("de-DE")})})},applyForCredit:function(classifiedId){$(".js-apply-now").on("click",function(){var d=$(this).data();var type=d["loantype"];var data={};var loanDeposit=$("#loan-deposit").val();var loanPeriod=$("#loan-period").val();var loanAmount=$("#loan-amount").val();if(typeof loanDeposit!="undefined"&&loanDeposit!=""){loanDeposit=loanDeposit.replace(/[\D\s\._\-]+/g,"");data["loanDeposit"]=loanDeposit}if(typeof loanPeriod!="undefined"&&loanPeriod!=""){data["loanPeriod"]=loanPeriod}if(typeof loanAmount!="undefined"&&loanAmount!=""){loanAmount=loanAmount.replace(/[\D\s\._\-]+/g,"");data["loanAmount"]=loanAmount}if(typeof loanDeposit!="undefined"&&type!="eur"&&(d["trigger_ucesce_event"]==undefined||d["trigger_ucesce_event"]!=false)){ga("send","event","Oglas","click","Klik na izračunaj ratu kredita widget slajfna - ucesce",{nonInteraction:true})}if(typeof loanAmount!="undefined"&&type!="eur"&&(d["trigger_ucesce_event"]==undefined||d["trigger_ucesce_event"]!=false)){ga("send","event","Oglas","click","Klik na izračunaj ratu kredita widget slajfna - iznos kredita",{nonInteraction:true})}data["loanType"]=type;var query_string=$.param(data);window.open("/auto-kredit/"+classifiedId+"?"+query_string,"_self");return true})},scrollTo:function(element){$("html, body").animate({scrollTop:$(element).offset().top},500)},recommendedAds:function(userId,itemId,classified_data){$.get("/recommended/get-related",{classifiedId:itemId,classified:classified_data},function(response){if(response.error===false){$(".user-recommended").append(response.message);dataLayer.push({event:"gendra-prikaz"})}else{dataLayer.push({event:"gendra-greska"})}})},bindHomeDeliverySendRequest:function(modal,webSocket){$(document).on("click","#home_delivery_form form #submit",function(){$.post("/send-home-delivery-request/"+$("#send_to").val()+"/"+$("#classifiedId").val(),$("#home_delivery_form form").serialize(),function(response){if(response.success){ga("send","event","Oglas","click","Prijava na Kupi od kuce");webSocket.onopen=function(){webSocket.send(JSON.stringify({userId:response.sender,type:"connection",page:"ad"}))};webSocket.send(JSON.stringify({thread_id:response.thread_id,sender:response.sender,recipient:response.recipient,text:response.text,sender_fb_uid:response.sender_fb_uid,type:"new_thread",sender_name:response.sender_name}));modal.hide();UIkit.modal.alert(response.message,{labels:{Ok:"U redu"}})}else{$(".home_delivery_form").html(response.message)}})})},bindHomeDeliveryGAEvent:function(){ga("send","event","Oglas","view","Oglas Kupi od kuce")},homeDeliverModaEvents:function(){$(".js-sendRequestOpenForm").on("click",function(){$(".js-sendMessageForm").slideDown();$(".js-actionButtons").slideUp()});$(".js-showDealerPhoneNumber").on("click",function(e){e.preventDefault();$(this).hide();$(".js-DealerPhoneNumber").show()})}};
var PA=PA||{};PA.hd={isCodeRequested:false,openGallery:function(){var lightbox=UIkit.lightbox($(".hd_gallery_init"));lightbox.show();$(document).on("keyup",function(e){if(e.keyCode===27){$(".uk-modal-close").trigger("click")}})}};
var PA=PA||{};PA.tools={askForAnotherAd:false,classifiedPublish:function(classifiedId,csrf_token,callback){PA.common.loaderStart();UIkit.modal.confirm("Da li si siguran da želiš da aktiviraš ovaj oglas?",function(){PA.common.loaderStop();$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/publish",data:{csrf_token:csrf_token}}).done(function(data){if(data.warning===true){UIkit.modal.alert(data.message)}else if(typeof data.imageError!="undefined"&&data.imageError){UIkit.modal.confirm(data.message,function(){window.location.href="/oglas/izmena/"+classifiedId+"?showGallery=true"},{labels:{Ok:"Dodaj fotografije",Cancel:"Zatvori"}});return false}else if(data.error==true){UIkit.modal.confirm(data.message,function(){var paymentType=$(".paymentType:checked").val();var imported=typeof data.imported==="undefined"?false:true;var extended=typeof data.extended==="undefined"?false:true;var dealerExtended=typeof data.dealerExtended==="undefined"?false:true;if(!dealerExtended){if(imported==false&&extended==false){return false}if(typeof paymentType==="undefined"){return false}}$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/publish",data:{paymentType:paymentType,csrf_token:csrf_token,extended:extended,imported:imported,dealerExtended:dealerExtended}}).done(function(data){if(paymentType=="creditCard"&&extended){window.location.href="/placanje-kreditnom-karticom/dodatni-oglas/"+classifiedId;return false}else if(paymentType=="creditCard"&&imported){window.location.href="/placanje-kreditnom-karticom/trgovacki-oglas/"+classifiedId;return false}else if(paymentType=="credit"){data.instructions=false}if(data.instructions===true){PA.tools.showPaymentInstructions(classifiedId);callback()}else{UIkit.modal.alert(data.message);callback()}callback()})})}else{callback()}})},function(){PA.common.loaderStop()},{labels:{Ok:"U redu",Cancel:"Zatvori"}})},classifiedRenewInactive:function(classifiedId,csrf_token,callback){PA.common.loaderStart();$.get("/classified/"+classifiedId+"/renew/choice",function(html){PA.common.loaderStop();UIkit.modal.confirm(html,function(){var type=$(".type").val();var featured=$(".featured:checked").val();var paymentType=$(".paymentType:checked").val();if(typeof type==="undefined"){return false}else if(type=="normal"&&featured=="true"&&typeof paymentType==="undefined"){return false}else if((type=="imported"||type=="extended")&&typeof paymentType==="undefined"){return false}else if(type=="paid_renew"&&typeof paymentType==="undefined"){return false}$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/renew",data:{csrf_token:csrf_token,type:type,featured:featured,paymentType:paymentType}}).done(function(data){$(".js-modal-confirm-cancel").trigger("click");if(paymentType=="creditCard"){if(type=="paid_renew"&&featured=="false"){window.location="/placanje-kreditnom-karticom/paid_renew/"+classifiedId}else{window.location="/placanje-kreditnom-karticom/isticanje-pretraga-"+data.duration+"/"+classifiedId}return false}if(paymentType=="credit"){data.instructions=false}if(data.instructions===true){PA.tools.showPaymentInstructions(classifiedId);callback()}else{UIkit.modal.alert(data.message);callback()}})},{labels:{Ok:"U redu",Cancel:"Zatvori"}});var featured_holder=$("#renewInactive #renew_featured");var paid_renew_holder=$("#renewInactive #paid_renew");$("#renewInactive .featured").on("click",function(){var value=$(this).val();var type=$(".type").val();if(value=="true"){if(type=="paid_renew"){paid_renew_holder.slideUp()}featured_holder.slideDown();$("input",paid_renew_holder).prop("checked",false)}else{featured_holder.slideUp();if(type=="paid_renew"){paid_renew_holder.slideDown()}$("input",featured_holder).prop("checked",false)}})})},classifiedFeatureXL:function(classifiedId,requestPage,csrf_token,callback){PA.common.loaderStart();$.get("/classified/"+classifiedId+"/feature/XLChoice",function(response){PA.common.loaderStop();UIkit.modal.confirm(response.html,function(){var paymentType=$(".paymentType:checked").val();var duration=$(".duration:checked").val();var buySearch=$(".buySearch").is(":checked")?1:0;if(typeof paymentType==="undefined"||typeof duration==="undefined"){return false}$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/feature/XL",data:{duration:duration,method:paymentType,buySearch:buySearch,csrf_token:csrf_token,requestPage:requestPage}}).done(function(data){if(data.error==false&&paymentType=="creditCard"){window.location="/placanje-kreditnom-karticom/xl-oglas-"+duration+"/"+classifiedId;return false}else if(typeof data.imageError!="undefined"&&data.imageError){UIkit.modal.confirm(data.message,function(){window.location.href="/oglas/izmena/"+classifiedId+"?showGallery=true";return false},{labels:{Ok:"Dodaj fotografije",Cancel:"Zatvori"}})}if(data.error==false){UIkit.modal.alert(data.message).on("hide.uk.modal",function(){dataLayer.push({event:"featuring_checkout",featuring_type:"xl",payment_type:paymentType,ad_id:classifiedId});$(".uk-modal-dialog").removeClass("uk-modal-dialog-large");callback()});if(paymentType=="ips"){PA.ips.init(classifiedId,data.price,"xl","xl");$("#try_again").on("click",function(){PA.ips.init(classifiedId,data.price,"xl","xl")})}}})},{labels:{Ok:"U redu",Cancel:"Zatvori"}});if(response.success==true){$(".uk-modal-dialog").addClass("uk-modal-dialog-large")}else{$(".uk-modal-dialog").removeClass("uk-modal-dialog-large")}})},classifiedFeatureSearch:function(classifiedId,requestPage,callback){PA.common.loaderStart();$.get("/classified/"+classifiedId+"/feature/searchChoice",function(data){PA.common.loaderStop();UIkit.modal.confirm(data.html,function(){var paymentType=$(".paymentType:checked").val();var buyXL=$(".buyXL").is(":checked")?1:0;var duration=$(".duration:checked").val();if(data.input_data!=null&&(typeof paymentType=="undefined"||paymentType==null)){paymentType=data.input_data.paymentType;duration=data.input_data.paymentType}var auto_feature=$(".action-type:checked").val()=="featureAndAutoFeature"?1:0;var auto_feature_duration=$(".action-type:checked").data("duration");$(":button.right").attr("disabled",true);if(typeof paymentType==="undefined"){return false}$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/feature/search",data:{method:paymentType,auto_feature:auto_feature,auto_feature_duration:auto_feature_duration,buyXL:buyXL,requestPage:requestPage},success:function(data){dataLayer.push({event:"featuring_checkout",featuring_type:"search",payment_type:paymentType,ad_id:classifiedId});if(paymentType=="creditCard"){window.location="/placanje-kreditnom-karticom/isticanje-pretraga-"+duration+"/"+classifiedId;return false}if(PA.tools.askForAnotherAd==true){UIkit.modal.confirm(data.message+"<p class='yellowTitle'><h5 class='uk-text-center' style='color: #f1a41a;'>Da li želiš da vidiš svoj sledeći oglas koji je najlošije pozicioniran<br> u pretrazi za tu marku i model?</h5></p>",function(){PA.profile.checkFeatureSuggestion();ga("send","event","Dilerski profil","click","Pop-up obaveštenje - sugestija za sledeći oglas","Da")},{labels:{Ok:"Da",Cancel:"Ne"}}).on("click",".js-modal-confirm-cancel",function(){$(".uk-modal-dialog").removeClass("uk-modal-dialog-large");$.cookie("featureSuggestionDailyCheck",1,{expires:5});$.cookie("featureSuggestionPopupShowed",1,{expires:5});ga("send","event","Dilerski profil","click","Pop-up obaveštenje - sugestija za sledeći oglas","Ne");callback()})}else{if(data.showWarning){UIkit.modal("#js-creditWarning").show().on("hide.uk.modal",function(){callback()});$(".uk-modal-dialog").removeClass("uk-modal-dialog-large")}else{UIkit.modal.alert(data.message).on("hide.uk.modal",function(){$(".uk-modal-dialog").removeClass("uk-modal-dialog-large");$(".js-placeholderFeatureSuggested").addClass("uk-hidden");callback()})}if(paymentType=="ips"){PA.ips.init(classifiedId,data.price,"search","search");$("#try_again").on("click",function(){PA.ips.init(classifiedId,data.price,"search","search")})}}if(!data.showWarning){$(".uk-modal-dialog").addClass("uk-modal-dialog-large")}}})},function(){$('.js-featuredSearch[data-id="'+classifiedId+'"]').data("requestpage","")},{labels:{Ok:"U redu",Cancel:"Zatvori"}}).on("click",".js-modal-confirm-cancel",function(){$.cookie("featureSuggestionDailyCheck",1,{expires:5});$.cookie("featureSuggestionPopupShowed",1,{expires:5})});$(".uk-modal-dialog").addClass("uk-modal-dialog-large")})},classifiedFeatureHome:function(classifiedId,requestPage,csrf_token,callback){PA.common.loaderStart();$.get("/classified/"+classifiedId+"/feature/homeChoice",function(response){PA.common.loaderStop();if(response.error==true){UIkit.modal.alert(response.html);return false}if(response.gratis==true){callback();return false}UIkit.modal.confirm(response.html,function(){var paymentType=$(".paymentType:checked").val();if(typeof paymentType==="undefined"){return false}if(paymentType=="creditCard"){window.location.href="/placanje-kreditnom-karticom/isticanje-naslovna/"+classifiedId;return false}var swap_with=0;if(paymentType=="swap"){var el=$(".paymentType:checked");var el_data=el.data();swap_with=el_data["id"]}var activateHomeAutoFeature=0;if(paymentType==="credit"){activateHomeAutoFeature=$(".paymentType:checked").data("activate-home-auto-feature")}$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/feature/home",data:{method:paymentType,csrf_token:csrf_token,swap_with:swap_with,requestPage:requestPage,activateHomeAutoFeature:activateHomeAutoFeature}}).done(function(data){UIkit.modal.alert(data.message,{labels:{Ok:"U redu"}}).on("hide.uk.modal",function(){if(data.gratis||paymentType!="ips"){callback()}});$(".uk-modal-dialog").addClass("uk-modal-dialog-large");dataLayer.push({event:"featuring_checkout",featuring_type:"home",payment_type:paymentType,ad_id:classifiedId});if(!data.gratis&&paymentType=="ips"){PA.ips.init(classifiedId,data.price,"home","home");$("#try_again").on("click",function(){PA.ips.init(classifiedId,data.price,"home","home")})}})},{labels:{Ok:"U redu",Cancel:"Zatvori"}});$(".uk-modal-dialog").addClass("uk-modal-dialog-large")})},classifiedReUpgradeActive:function(classifiedId,requestPage,callback){PA.common.loaderStart();$.get("/classified/"+classifiedId+"/feature/searchChoice",function(data){PA.common.loaderStop();UIkit.modal.confirm(data.html,function(){var auto_feature=$(".action-type:checked").val()=="reUpgradeAndAutoFeature"?1:0;var auto_feature_duration=$(".action-type:checked").data("duration");$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/reUpgrade",data:{auto_feature:auto_feature,auto_feature_duration:auto_feature_duration,requestPage:requestPage}}).done(function(data){UIkit.modal.alert(data.message);callback()})},{labels:{Ok:"U redu",Cancel:"Zatvori"}});$("time").timeago()})},bindOnCredit:function(classifiedId,isActive){if($(".js-credit").length>0){ga("send","event","Prodaja na kredit - fizicko lice","view","Korisnik je video poruku")}var $btn=$("button.js-credit");$btn.on("click",function(){$btn.prop("disabled",true);$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/onCredit",data:{isActive:isActive}}).done(function(){if(isActive){PA.profile.reloadActiveAds()}else{PA.profile.reloadInactiveAds()}UIkit.modal.alert("Uspešno omogućena prodaja na kredit");ga("send","event","Prodaja na kredit - fizicko lice","click","Odabir prodaje na kredit")})})},classifiedRenewActive:function(classifiedId,csrf_token,callback){PA.common.loaderStart();$.get("/classified/"+classifiedId+"/renew/choice",function(html){PA.common.loaderStop();UIkit.modal.confirm(html,function(){var type=$(".type").val();var featured=$(".featured:checked").val();var paymentType=$(".paymentType:checked").val();if(typeof type==="undefined"){return false}else if(type=="normal"&&featured=="true"&&typeof paymentType==="undefined"){return false}else if((type=="imported"||type=="extended")&&typeof paymentType==="undefined"){return false}else if(type=="paid_renew"&&typeof paymentType==="undefined"){return false}$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/renew",data:{csrf_token:csrf_token,type:type,featured:featured,paymentType:paymentType}}).done(function(data){$(".js-modal-confirm-cancel").trigger("click");if(paymentType=="creditCard"){if(type=="paid_renew"&&featured=="false"){window.location="/placanje-kreditnom-karticom/paid_renew/"+classifiedId}else{window.location="/placanje-kreditnom-karticom/isticanje-pretraga-"+data.duration+"/"+classifiedId}return false}if(paymentType=="credit"){data.instructions=false}if(data.instructions===true){PA.tools.showPaymentInstructionsActive(classifiedId,type);callback()}else{UIkit.modal.alert(data.message);callback()}})},{labels:{Ok:"U redu",Cancel:"Zatvori"}});var featured_holder=$("#renewInactive #renew_featured");var paid_renew_holder=$("#renewInactive #paid_renew");$("#renewInactive .featured").on("click",function(){var value=$(this).val();var type=$(".type").val();if(value=="true"){if(type=="paid_renew"){paid_renew_holder.slideUp()}featured_holder.slideDown();$("input",paid_renew_holder).prop("checked",false)}else{featured_holder.slideUp();if(type=="paid_renew"){paid_renew_holder.slideDown()}$("input",featured_holder).prop("checked",false)}})})},classifiedUnPublish:function(classifiedId,csrf_token,callback){$.get("/extended-ad-message/"+classifiedId,function(extendedAdResponse){PA.common.loaderStart();UIkit.modal.confirm("Želiš da deaktiviraš oglas?",function(){$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/unPublish",data:{csrf_token:csrf_token}}).done(function(){PA.common.loaderStop();callback();PA.tools.showExtendedAdModal(extendedAdResponse.extendedAdMessage)})},{labels:{Ok:"U redu",Cancel:"Zatvori"}});PA.common.loaderStop()})},showExtendedAdModal:function(extendedAdMessage){if(extendedAdMessage!==null){UIkit.modal.alert(extendedAdMessage,{labels:{Ok:"U redu"}})}},classifiedDelete:function(classifiedId,status,csrf_token,callback){PA.common.loaderStart();$.get("/classified/"+classifiedId+"/delete/message",{status:status},function(html){PA.common.loaderStop();UIkit.modal.confirm(html,function(){$.ajax({type:"DELETE",url:"/classified/"+classifiedId,data:{status:status,csrf_token:csrf_token}}).done(function(data){if(data.error){UIkit.modal.alert(data.message)}else{callback(data.show_delete_survey)}})},{labels:{Ok:"U redu",Cancel:"Zatvori"}})})},classifiedSold:function(classifiedId,status,csrf_token,callback){UIkit.modal.confirm("Da li si siguran da želiš obrisati oglas?",function(){ga("send","event","Korisnički profil","click","Prodao sam vozilo - potvrda");PA.common.loaderStart();$.post("/classified/sold/"+classifiedId,{status:status,csrf_token:csrf_token},function(data){PA.common.loaderStop();if(data.error==true){UIkit.modal.alert(data.message)}else{callback()}})},{labels:{Ok:"U redu",Cancel:"Zatvori"}})},classifiedUpdateSalePriceStatus:function(classifiedId,status,csrf_token,callback){var message=status=="active"?"Da li želiš ponovo da uključiš prikaz snižene cene?":"Da li si siguran da želiš da sakriješ sniženu cenu za ovaj oglas?";UIkit.modal.confirm(message,function(){PA.common.loaderStart();$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/salePrice",data:{csrf_token:csrf_token,status:status}}).done(function(data){PA.common.loaderStop();UIkit.modal.alert(data.message,{labels:{Ok:"U redu"}});callback()})},{labels:{Ok:"U redu",Cancel:"Zatvori"}})},showXLPoll:function(classifiedId){$.get("/classified/"+classifiedId+"/XLPoll/Check",function(html){if(html==""){return false}UIkit.modal.confirm(html,function(){$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/XLPoll",data:{isHappy:1}})},function(){$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/XLPoll",data:{isHappy:0}})},{labels:{Ok:"Jesam",Cancel:"Nisam"}});$(".js-modal-confirm").last().removeAttr("disabled")})},classifiedDeleteSurvey:function(classifiedId,csrf_token,callback){PA.common.loaderStart();$.get("/classified/"+classifiedId+"/deleteSurvey/choice",function(html){PA.common.loaderStop();UIkit.modal.confirm(html,function(){var other_reason="";var delete_reason_option=$(".delete_reason_option:checked").val();var delete_reason=$(".delete_reason:checked").val();var price=$(".delete_reason_price").val();var other_reason_sold=$(".other_reason_sold").val();var other_reason_traded=$(".other_reason_traded").val();var other_reason_gave_up=$(".other_reason_gave_up").val();var other_reason_other=$(".other_reason_other").val();var show_sold=$("#delete_show_sold").is(":checked");if(typeof delete_reason_option=="undefined"){return false}if((delete_reason_option=="sold"||delete_reason_option=="traded")&&typeof delete_reason=="undefined"){return false}if(delete_reason_option=="sold"||delete_reason_option=="traded"){delete_reason_option=delete_reason;delete_reason=""}if(other_reason_sold){other_reason=other_reason_sold}if(other_reason_traded){other_reason=other_reason_traded}if(other_reason_gave_up){other_reason=other_reason_gave_up}if(other_reason_other){other_reason=other_reason_other}var sendData={csrf_token:csrf_token,reason:delete_reason_option,reason_desc:delete_reason,price:price,show_sold:show_sold,other_reason:other_reason};$.ajax({type:"POST",url:"/classified/"+classifiedId+"/deleteSurvey",data:sendData}).done(function(data){if(data.error){UIkit.modal.alert(data.message)}else{callback(data.show_satisfaction_survey)}})},function(){$(".js-modal-confirm").removeAttr("disabled");PA.tools.delete_survey_cancel(classifiedId,csrf_token)},{labels:{Ok:"U redu",Cancel:"Zatvori"}});PA.tools.disabledButtonSurvey();$(".delete_reason_option").on("change",function(){if($(".delete_reason_option:checked").val()=="sold"||$(".delete_reason_option:checked").val()=="traded"){$(".delete_reason").prop("checked",false);$(".other_reason").prop("checked",false);PA.tools.disabledButtonSurvey()}else if($(".delete_reason_option:checked").val()=="renew"){$(".delete_reason").prop("checked",false);$(".delete_reason_renew").prop("checked",true);PA.tools.enabledButtonSurvey()}else if($(".delete_reason_option:checked").val()=="gave_up"||$(".delete_reason_option:checked").val()=="other"){PA.tools.enabledButtonSurvey()}});$(".delete_reason").on("change",function(){PA.tools.enabledButtonSurvey()});$(".delete_reason_option").on("click",function(){$(".delete_reason_holder").slideUp();var value=$(this).val();$(".delete_reason_"+value).slideDown();var delete_show_sold=$(".delete_show_sold");if(value=="sold"){delete_show_sold.slideDown()}else{delete_show_sold.slideUp()}})})},classifiedSatisfactionSurvey:function(classifiedId,userId,csrf_token,callback){PA.common.loaderStart();$.get("/classified/"+classifiedId+"/satisfactionSurvey",function(html){PA.common.loaderStop();UIkit.modal.confirm(html,function(){var grade=$('input[name="grade"]:checked').val();var comment=$(".js-comment").val();var sendData={csrf_token:csrf_token,userId:userId,grade:grade,comment:comment};$.ajax({type:"POST",url:"/classified/"+classifiedId+"/satisfactionSurvey",data:sendData}).done(function(data){UIkit.modal.alert(data.message,{labels:{Ok:"U redu"}});callback()})},function(){$(".js-modal-confirm").removeAttr("disabled");PA.tools.delete_survey_cancel(classifiedId,csrf_token)},{labels:{Ok:"U redu",Cancel:"Zatvori"}});PA.tools.disabledButtonSurvey();$(".js-grade").on("change",function(){if($(this).val()!=null){PA.tools.enabledButtonSurvey()}})})},disabledButtonSurvey:function(){$(".js-modal-confirm").prop("disabled",true);$(".js-modal-confirm").css("backgroundColor","#00a8e6")},enabledButtonSurvey:function(){$(".js-modal-confirm").prop("disabled",false)},classifiedSoldSurvey:function(classifiedId,csrf_token){$.get("/classified/"+classifiedId+"/soldSurvey/choice",function(html){UIkit.modal.confirm(html,function(){var delete_reason_option=$(".delete_reason:checked").val();var price=$(".delete_reason_price").val();var show_sold=$("#delete_show_sold").is(":checked");var other_reason_sold=$(".other_reason_sold").val();if(typeof delete_reason_option=="undefined"){return false}$.post("/classified/"+classifiedId+"/soldSurvey",{reason:delete_reason_option,price:price,show_sold:show_sold,other_reason_sold:other_reason_sold,csrf_token:csrf_token},function(response){UIkit.modal.alert(response.message,{labels:{Ok:"U redu"}})})},function(){$(".js-modal-confirm").attr("disabled","disabled")},{labels:{Ok:"U redu",Cancel:"Zatvori"}});$(".js-modal-confirm").attr("disabled","disabled");$(".delete_reason").on("change",function(){$(".js-modal-confirm").removeAttr("disabled")})})},classifiedAutoFeatureToggle:function(classifiedId,auto_feature,csrf_token,callback){PA.common.loaderStart();$.get("/classified/"+classifiedId+"/feature/searchChoice",function(data){PA.common.loaderStop();UIkit.modal.confirm(data.html,function(){var auto_feature_duration=$(".action-type:checked").data("auto_feature_duration");$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/feature/autoFeature",data:{classifiedId:classifiedId,auto_feature:auto_feature_duration,csrf_token:csrf_token}}).done(function(data){if(data.error==true){UIkit.modal.alert(data.message)}callback()},{labels:{Ok:"U redu",Cancel:"Zatvori"}})},{labels:{Ok:"U redu",Cancel:"Zatvori"}})})},cancelAutoFeature:function(classifiedId,csrf_token,callback){PA.common.loaderStart();$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/feature/autoFeature",data:{classifiedId:classifiedId,auto_feature:0,csrf_token:csrf_token}}).done(function(data){if(data.error==true){UIkit.modal.alert(data.message)}$(".js-modal-confirm-cancel").click();PA.common.loaderStop();callback()})},deactivateHomeAutoFeature:function(classifiedId,csrf_token,callback){PA.common.loaderStart();$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/deactivate-home-auto-feature",data:{classifiedId:classifiedId,csrf_token:csrf_token}}).done(function(data){if(data.error==true){UIkit.modal.alert(data.message)}$(".js-modal-confirm-cancel").click();PA.common.loaderStop();callback()})},activateTopSearchAutoFeature:function(classifiedId,csrf_token,callback){PA.common.loaderStart();$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/activate-top-search-auto-feature",data:{classifiedId:classifiedId,csrf_token:csrf_token}}).done(function(data){if(data.error==true){UIkit.modal.alert(data.message)}$(".js-modal-confirm-cancel").click();PA.common.loaderStop();callback()})},deactivateTopSearchAutoFeature:function(classifiedId,csrf_token,callback){PA.common.loaderStart();$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/deactivate-top-search-auto-feature",data:{classifiedId:classifiedId,csrf_token:csrf_token}}).done(function(data){if(data.error==true){UIkit.modal.alert(data.message)}$(".js-modal-confirm-cancel").click();PA.common.loaderStop();callback()})},delete_survey_cancel:function(classifiedId,csrf_token){var sendData={csrf_token:csrf_token,reason:"closed"};$.ajax({type:"POST",url:"/classified/"+classifiedId+"/deleteSurvey",data:sendData}).done(function(){if(window.location.href.indexOf("neaktivni-oglasi")>-1){window.location="/redirect/neaktivni-oglasi"}else{window.location="/redirect/aktivni-oglasi"}})},classifiedFeatureDealerAds:function(classifiedId,category,csrf_token,callback){PA.common.loaderStart();$.get("/classified/"+classifiedId+"/feature/dealerAdsChoice",{category:category},function(data){PA.common.loaderStop();if(data.category==4200||data.category==4201){if(data.success===false){UIkit.modal.alert(data.message,{labels:{Ok:"U redu"}})}else{UIkit.modal.confirm(data.html,function(){window.location.href="/profil-oglasivaca/oglas/"+classifiedId+"/isticanje-ponude"},{labels:{Ok:"Nastavi",Cancel:"Odustani"}})}}else{if(data.success==true){if(data.hasEnoughCredit==true){UIkit.modal.confirm(data.html,function(){var paymentType="credit";var duration=15;$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/feature/dealerAds",data:{duration:duration,paymentType:paymentType,csrf_token:csrf_token}}).done(function(data){UIkit.modal.alert(data.message).on("hide.uk.modal",function(){callback()})})},{labels:{Ok:"U redu",Cancel:"Zatvori"}})}else{UIkit.modal.confirm(data.html,function(){window.location.href="/redirect/krediti"},{labels:{Ok:"Poruči kredite",Cancel:"Zatvori"}})}}else{UIkit.modal.alert(data.message,{labels:{Ok:"U redu",Cancel:"Zatvori"}})}}})},classifiedFeatureTopSearch:function(classifiedId,requestPage,csrf_token,callback){PA.common.loaderStart();$.get("/classified/"+classifiedId+"/feature/topSearchChoice",function(response){PA.common.loaderStop();UIkit.modal.confirm(response.html,function(){var paymentType=$(".paymentType:checked").val();var duration=$(".duration").val();if(typeof paymentType==="undefined"){return false}var activateTopSearchFeature=0;if(paymentType==="credit"){activateTopSearchFeature=$(".paymentType:checked").data("activate-top-search-auto-feature")}$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/feature/topSearch",data:{duration:duration,method:paymentType,csrf_token:csrf_token,requestPage:requestPage,activateTopSearchFeature:activateTopSearchFeature}}).done(function(data){if(data.error==false){if(paymentType==="creditCard"){window.location.href="/placanje-kreditnom-karticom/isticanje-iznad-pretrage-"+duration+"/"+classifiedId;return false}UIkit.modal.alert(data.message).on("hide.uk.modal",function(){dataLayer.push({event:"featuring_checkout",featuring_type:"topSearch",payment_type:paymentType,ad_id:classifiedId});$(".uk-modal-dialog").removeClass("uk-modal-dialog-large");callback()});if(paymentType=="ips"){PA.ips.init(classifiedId,data.price,"topSearch","topSearch");$("#try_again").on("click",function(){PA.ips.init(classifiedId,data.price,"topSearch","topSearch")})}}else{UIkit.modal.alert(data.message,{labels:{Ok:"U redu"}})}})},{labels:{Ok:"U redu",Cancel:"Zatvori"}});if(response.success){$(".uk-modal-dialog").addClass("uk-modal-dialog-large")}else{$(".uk-modal-dialog").removeClass("uk-modal-dialog-large")}})},classifiedDuplicateActive:function(classifiedId,csrf_token,callback){UIkit.modal.confirm("<h2>Postavi oglas ponovo</h2>Nakon aktivacije, oglas će se ponašati kao novopostavljen.<br><br><strong>Trenutno aktivne usluge na ovom oglasu će se isključiti nakon aktivacije ove usluge (isticanje u pretrazi, na naslovnoj stranici i XL oglas), a pratioci oglasa će biti obrisani.</strong><br><br>Cena aktivacije u <strong>promotivnom periodu</strong> je 0,5 kredita.<br><br>Nije moguće aktivirati za oglas koji je aktivan na sajtu kraće od 24h.",function(){PA.common.loaderStart();$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/duplicate/active",data:{csrf_token:csrf_token}}).done(function(data){PA.common.loaderStop();UIkit.modal.alert(data.message,{labels:{Ok:"U redu"}});callback()})},{labels:{Ok:"Aktiviraj",Cancel:"Odustani"}})},showPaymentInstructions:function(classifiedId){PA.common.loaderStart();$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/paymentInstructions/inactive"}).done(function(data){PA.common.loaderStop();var modal=UIkit.modal.dialog(data,{labels:{Ok:"U redu"}});$(".uk-modal-dialog").addClass("uk-modal-dialog-large");modal.show();$(".paymentTab").on("click",function(){$(this).addClass("paymentSelected").siblings().removeClass("paymentSelected");var d=$(this).data();var payment_type=d["payment_type"];$("."+payment_type+"Container").last().show().siblings().hide()});$(".payByCredit").on("click",function(){var d=$(this).data();var pricePlan=d["priceplan"];var classifiedId=d["classifiedid"];var csrf_token=d["csrftoken"];modal.hide();if(pricePlan=="imported"){PA.common.loaderStart();var page=d["page"];$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/paybycredit",data:{csrf_token:csrf_token,imported:true,requested_page:page}}).done(function(data){PA.profile.reloadInactiveAds();$(".js-modal-confirm-cancel").trigger("click");UIkit.modal.alert(data.message,{labels:{Ok:"U redu"}});PA.common.loaderStop()})}else if(pricePlan=="extended"){PA.common.loaderStart();$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/paybycredit",data:{csrf_token:csrf_token,extended:true}}).done(function(data){PA.profile.reloadInactiveAds();$(".js-modal-confirm-cancel").trigger("click");UIkit.modal.alert(data.message,{labels:{Ok:"U redu"}});PA.common.loaderStop()})}else if(pricePlan=="paid_renew"){PA.common.loaderStart();$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/paybycredit",data:{csrf_token:csrf_token,paid_renew:true}}).done(function(data){PA.profile.reloadInactiveAds();$(".js-modal-confirm-cancel").trigger("click");UIkit.modal.alert(data.message,{labels:{Ok:"U redu"}});PA.common.loaderStop()})}else{PA.common.loaderStart();$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/feature/search/inactive",data:{duration:d["duration"]}}).done(function(data){PA.profile.reloadInactiveAds();$(".js-modal-confirm-cancel").trigger("click");UIkit.modal.alert(data.message,{labels:{Ok:"U redu"}});PA.common.loaderStop()})}});$(".js-close-instructions").on("click",function(){modal.hide()})})},showPaymentInstructionsActive:function(classifiedId,featureType){PA.common.loaderStart();$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/paymentInstructions/active?type="+featureType}).done(function(data){PA.common.loaderStop();var modal=UIkit.modal.dialog(data,{labels:{Ok:"U redu"}});$(".uk-modal-dialog").addClass("uk-modal-dialog-large");modal.show();$(".paymentTab").on("click",function(){$(this).addClass("paymentSelected").siblings().removeClass("paymentSelected");var d=$(this).data();var payment_type=d["payment_type"];$("."+payment_type+"Container").last().show().siblings().hide()});$(".payByCredit").on("click",function(){var d=$(this).data();var pricePlan=d["priceplan"];var classifiedId=d["classifiedid"];var csrf_token=d["csrftoken"];modal.hide();if(pricePlan=="imported"){PA.common.loaderStart();var page=d["page"];$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/paybycredit",data:{csrf_token:csrf_token,imported:true,requested_page:page}}).done(function(data){PA.profile.reloadInactiveAds();$(".js-modal-confirm-cancel").trigger("click");UIkit.modal.alert(data.message,{labels:{Ok:"U redu"}});PA.common.loaderStop()})}else if(pricePlan=="extended"){PA.common.loaderStart();$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/paybycredit",data:{csrf_token:csrf_token,extended:true}}).done(function(data){PA.profile.reloadInactiveAds();$(".js-modal-confirm-cancel").trigger("click");UIkit.modal.alert(data.message,{labels:{Ok:"U redu"}});PA.common.loaderStop()})}else{PA.common.loaderStart();$.ajax({type:"PUT",url:"/classified/"+classifiedId+"/feature/search/active",data:{duration:d["duration"]}}).done(function(data){PA.profile.reloadInactiveAds();$(".js-modal-confirm-cancel").trigger("click");UIkit.modal.alert(data.message,{labels:{Ok:"U redu"}});PA.common.loaderStop()})}});$(".js-close-instructions").on("click",function(){modal.hide()})})}};
var PA=PA||{};PA.message={source:"other",getDialogClassified:function(classifiedId,ws_server,type){var route="";if(type==="contact_inbox"){route="/inbox/dialog-classified"}else if(type==="test_ride"){route="/inbox/dialog-test-ride"}else{route="/inbox/dialog-home-delivery"}$.get(route,{classifiedId:classifiedId},function(response){var uikitdialog=UIkit.modal.dialog(response.message);var ws=new WebSocket(ws_server);if(!response.error&&response.login){$(".js-owner-contact").removeAttr("disabled");uikitdialog.show();return false}if(!response.error&&type==="home-delivery"){$(".js-home-delivery").removeAttr("disabled");uikitdialog.show();$(document).off("click","#home_delivery_form form #submit");PA.details.bindHomeDeliverySendRequest(uikitdialog,ws);return false}if(!response.error){PA.common.loaderStop();$(".js-owner-contact").removeAttr("disabled");uikitdialog.show();PA.message.send(ws,type,uikitdialog);return false}if(response.error){$(".js-owner-contact").removeAttr("disabled");uikitdialog.show();return false}})},getSellerPageDialog:function(wsServer,type){var contact=$(".js-seller-page-contact");var urlAlias=contact.data("url-alias");$.get("/inbox/dialog-seller-page",{urlAlias:urlAlias},function(response){var dialog=UIkit.modal.dialog(response.message);var ws=new WebSocket(wsServer);if(!response.error&&response.login){contact.removeAttr("disabled");dialog.show();return false}if(!response.error){PA.common.loaderStop();contact.removeAttr("disabled");dialog.show();PA.message.send(ws,type,dialog);return false}if(response.error){contact.removeAttr("disabled");dialog.show();return false}})},bindContactDialog:function($classifiedId,ws_parameter){$(".js-owner-contact, .js-home-delivery, .js-seller-page-contact").on("click",function(){var type=$(this).data("type");$(this).attr("disabled","disabled");if(type==="home-delivery"){ga("send","event","Oglas","click","Klik na Kupi od kuce")}if($classifiedId===undefined){PA.message.getSellerPageDialog(ws_parameter,type)}else{PA.message.getDialogClassified($classifiedId,ws_parameter,type)}})},send:function(ws,type,uikitdialog){$(document).off("click").on("click","#message_form form #submit",function(){PA.common.loaderStart();if(type==="test_ride"){ga("send","event","Oglas","click","Prosledjivanje forme za test voznju")}var submit=$(this);submit.attr("disabled","disabled");$.post("/message/send",$("#message_form form").serialize(),function(response){$(".message_form").html(response.message);ws.onopen=function(){ws.send(JSON.stringify({userId:response.sender,type:"connection",page:"ad"}))};ws.send(JSON.stringify({thread_id:response.thread_id,sender:response.sender,recipient:response.recipient,text:response.text,sender_fb_uid:response.sender_fb_uid,type:"new_thread",sender_name:response.sender_name}));PA.message.send(ws,type)}).done(function(response){ws.close();PA.common.loaderStop();if(!response.error){dataLayer.push({event:"message_sent"});setTimeout(function(){uikitdialog.hide()},7e3)}});PA.common.loaderStop();return false})},deleteThread:function(csrf_token){$("#delete_threads").on("click",function(){PA.common.dataLayerEvent("obrisi");var threadIds=[];$(".threads-holder .message-check").each(function(){if(this.checked==true){threadIds.push($(this).attr("id"))}});if(threadIds.length==0){UIkit.modal.alert($("#thread-delete-error").html(),{labels:{Ok:"U redu"}})}else{var submit=$(this);submit.attr("disabled","disabled");var url="/delete/threads";if($(".js-show-unread").is(":checked")){var status="unread"}else{var status="all"}$.ajax({type:"DELETE",url:url,data:{threads:threadIds,csrf_token:csrf_token}}).done(function(response){if(response.success==false){UIkit.modal.alert(response.message,{labels:{Ok:"U redu"}});return false}PA.message.reloadThreads(true,10,status);submit.attr("disabled","enabled")});return false}})},blockThread:function(){$("#block_threads").on("click",function(){PA.common.dataLayerEvent("blokiraj");var threadIds=[];$(".threads-holder .message-check").each(function(){if($(this).prop("checked")){threadIds.push($(this).attr("id"))}});if(threadIds.length==0){UIkit.modal.alert($("#thread-block-error").html(),{labels:{Ok:"U redu"}})}else{var submit=$(this);submit.attr("disabled","disabled");var url="/block/threads";if($(".js-show-unread").is(":checked")){var status="unread"}else{var status="all"}$.ajax({type:"PUT",url:url,data:{threads:threadIds}}).done(function(response){if(response.success==false){UIkit.modal.alert("#thread-block-error",{labels:{Ok:"U redu"}});return false}PA.message.reloadThreads(true,10,status);submit.attr("disabled","enabled")});return false}})},openMessage:function(){$(".open-thread").off("click").on("click",function(){PA.common.dataLayerEvent("otvaranje_konkretne_poruke");if($(".js-show-unread").is(":checked")){var status="unread"}else{var status="all"}var thread_id=$(this).data("threadid");var userId=$(this).data("userid");var backLimit=$(".thread-data-holder").length;PA.common.loaderStart();$.get("/inbox/thread/"+thread_id+"?userId="+userId+"&backLimit="+backLimit+"&status="+status,function(response){if(!response.error){$("#profile-content").html(response);PA.message.scrollMessageIntoView();PA.common.loaderStop()}else{PA.common.loaderStop();UIkit.modal.alert(response.message);return false}PA.common.loaderStop()}).done(function(){$(".messages-holder").linkify({target:"_blank"})})})},scrollMessageIntoView:function(){var offset=$(".messages-holder").offset();offset.top-=20;$("html, body").animate({scrollTop:offset.top})},markSeen:function(ws,thread_id,sender,recipient){ws.send(JSON.stringify({thread_id:thread_id,sender:sender,recipient:recipient,type:"mark_seen"}))},reloadThreads:function(ws,backLimit,status){status=status||"all";if(ws!==true){ws.close()}$(".selected").unbind("click");PA.common.loaderStart();$.get("/inbox/threads",{backLimit:backLimit,status:status},function(response){$("#profile-content").html(response);PA.common.loaderStop();if(threadID){UIkit.Utils.scrollToElement(UIkit.$($("#open-thread_"+threadID),{}))}})},backToThreads:function(ws,backLimit,status){status=status||"all";$("#back-to-threads").on("click",function(){PA.message.reloadThreads(ws,backLimit,status)});$(".selected").on("click",function(event){event.preventDefault();PA.message.reloadThreads(ws,backLimit,status)})},reply_init:function(ws,thread_id,sender,recipient,sender_fb_uid,sender_name,hash,csrf_token){$("#send-message-button").on("click",function(){PA.common.dataLayerEvent("posalji_poruku");var text=$("#message_reply").val();if($.trim(text)==""){return false}PA.message.reply(ws,thread_id,sender,recipient,sender_fb_uid,sender_name,hash,csrf_token)})},reply:function(ws,thread_id,sender,recipient,sender_fb_uid,sender_name,hash,csrf_token){var text=$("#message_reply").val();var formatText=text.replace(/[\r\n]/g,"<br />");var offerNo="Poštovani, na žalost nemam ono što tražite. Srdačan pozdrav.";var offerYes="Poštovani, imam ono što tražite<br />Cena:";var dioTemplates=["Poštovani, trenutno traženi","Cena traženog dela","Za informacije o ponudi možete pozvati"];if(formatText.includes(offerNo)){dataLayer.push({event:"delovi na klik - poslato nemam"})}else if(formatText.includes(offerYes)){dataLayer.push({event:"delovi na klik - poslata ponuda"})}$.each(dioTemplates,function(index,message){if(formatText.includes(message)){ga("send","event","Inbox","poslato",message)}});$.ajax({type:"POST",url:"/inbox/reply/"+thread_id,data:{text:formatText,csrf_token:csrf_token},success:function(data){if(!data.success){}else if(ws.readyState!=1){$(".socket-warning").show()}else{ws.send(JSON.stringify({thread_id:thread_id,sender:sender,recipient:recipient,text:text,type:"message",hash:hash,source:PA.message.source,source:"site"}));ws.send(JSON.stringify({thread_id:thread_id,sender:sender,recipient:recipient,text:text,sender_fb_uid:sender_fb_uid,type:"new_thread",sender_name:sender_name,source:"site"}))}}});var d=new Date;$("#message_template").clone().show().appendTo(".messages-holder");$(".uk-comment-body").last().text(text);$("time").attr("datetime",d.toISOString()).timeago();$(".messages-holder").scrollTop(1e4);$("#message_reply").val("");$(".seen-holder").last().hide();$(".messages-holder").linkify({target:"_blank"})},uploadFile:function(ws,thread_id,csrf_token,delete_csrf_token,sender,recipient){$("#file-upload").on("change",function(){if($("#file-upload")[0].files[0]==undefined){return false}$("#file-upload").attr("disabled","disabled");PA.message.createLoader();if($("#file-upload")[0].files[0].size>20971520){$(".mine > .uk-comment-body > .loading").last().parent().html("Možete poslati datoteke veličine do 20 MB");return false}var type="image";if($("#file-upload").val().split(".").pop().toLowerCase()=="pdf"){type="file"}var formData=new FormData;formData.append("file",$("#file-upload")[0].files[0]);formData.append("csrf_token",csrf_token);$.ajax({url:"/inbox/file-upload/"+thread_id,type:"POST",data:formData,processData:false,contentType:false}).done(function(data){if(data.success==true){ws.send(JSON.stringify({text:data.file_name,type:type,sender:sender,thread_id:thread_id,recipient:recipient,messageId:data.messageId}));ws.send(JSON.stringify({text:data.file_name,type:"last_message",sender:sender,thread_id:thread_id,recipient:recipient,messageId:data.messageId,message_type:type}));if(data.extension==".pdf"){$(".uk-comment-body > .loading").last().parent().attr("data-messageid",data.messageId).html(' <div class="uk-float-left"><a href="/user-files/inbox/'+thread_id+"/"+data.file_name+'" class="thumbnail-file" target="_blank" style="color: #FFFFFF"><i class="uk-icon-file-pdf-o uk-text-danger"></i> Pdf - Dokument</a> <div class="delete-message-image"><span class="delete-file" data-messageid=" '+data.messageId+'"><i class="uk-icon-trash"></i> Obriši</span></div></div>').append('<div style="clear: both;"></div>')}else{$(".uk-comment-body > .loading").last().parent().attr("data-messageid",data.messageId).html(' <div class="uk-float-left position-relative"><img class="thumbnail-image uk-thumbnail" src="/user-images/inbox/'+thread_id+"/"+data.file_name+'"style="max-width:120px; max-height:120px;"><div class="position-absolute delete-message-image"><span class="delete-file" data-messageid="'+data.messageId+'"> <i class="uk-icon-trash"></i>Obriši sliku</span></div></div>').append('<div style="clear: both;"></div>');PA.message.openImage()}PA.message.deleteFile(ws,thread_id,delete_csrf_token,sender,recipient)}else{$(".uk-comment-body > .loading").last().parent().html(data.message)}$("#file-upload").removeAttr("disabled");$(".messages-holder").scrollTop(1e4)})})},createLoader:function(){var d=new Date;$("#message_template").clone().show().appendTo(".messages-holder");$(".uk-comment-body").last().html('<div class="loading"><h5>Učitavam</h5></div>');$("time").attr("datetime",d.toISOString()).timeago();$(".messages-holder").scrollTop(1e4)},openImage:function(){$(".thumbnail-image").on("click",function(){$("#image-holder").html('<a class="uk-modal-close uk-close" style="margin-top: -15px;"></a><img width="1200" src="'+$(this).attr("src")+'" />');UIkit.modal.dialog($("#image-holder").html()).show()})},deleteFile:function(ws,thread_id,csrf_token,sender,recipient){$(".delete-file").on("click",function(){var messageId=$(this).data("messageid");var html=$("#delete-file-warning").html();var deleteButton=$(this);deleteButton.attr("disabled","disabled");UIkit.modal.confirm(html,function(){$.ajax({type:"DELETE",url:"/inbox/file",data:{messageId:messageId,thread_id:thread_id,csrf_token:csrf_token}}).done(function(data){PA.common.loaderStop();deleteButton.attr("disabled","enabled");if(data.success==true){$(".uk-comment-body[data-messageid="+messageId+"]").html("<strong>Poruka je obrisana</strong>");ws.send(JSON.stringify({text:"Poruka je obrisana",sender:sender,recipient:recipient,type:"delete_file",messageId:messageId}))}})},{labels:{Ok:"Potvrdi",Cancel:"Odustani"}})})},loadMessages:function(thread_id){$(".messages-holder").on("scroll",function(){var pos=$(".messages-holder").scrollTop();if(pos==0){var skip=$(".message").length+$(".system-message").length;$(".messages-holder").prepend('<div class="loading load-messages loading-message">Učitavam još poruka<div class="uk-text-center"><i class="uk-icon-spinner uk-icon-spin uk-text-large"></i> </div></div>');$.get("/inbox/messages/"+thread_id+"?skip="+skip,function(data){if(data.length>0&&data!=" "){$(".messages-holder").linkify({target:"_blank"});$(".messages-holder").prepend(data);$(".loading").hide();$(".messages-holder").scrollTop();PA.message.openImage()}else{$(".messages-holder").prepend('<div class="no-more-messages uk-margin-bottom">Nema više poruka.</div>');$(".loading").hide();$(".messages-holder").unbind("scroll")}})}})},loadThreads:function(){$("#load-more-threads").on("click",function(){var skip=$(".threads-holder .thread").length;if($(".js-show-unread").is(":checked")){var status="unread"}else{var status="all"}PA.common.loaderStart();$.get("/inbox/threads/list?skip="+skip+"&ajax=true&status="+status,function(data){PA.common.loaderStop();if(data.length>0){$(".threads-holder").append(data)}else{$("#load-more-threads").hide();$(".threads-holder").append('<div class="no-more-messages uk-margin-bottom">Nema više poruka.</div>')}PA.message.openMessage()})})},updateThread:function(data){var text_holder=$(".open-thread[data-threadid ="+data.thread_id+"] .uk-comment-body");if(data.message_type=="message"){if((data.text+"").length>90){text_holder.text(jQuery.trim(data.text).substring(0,90).split(" ").slice(0,-1).join(" ")+"...")}else{text_holder.text(data.text)}$(".open-thread[data-threadid ="+data.thread_id+"] .uk-comment-meta").html("<time ></time>");$(".open-thread[data-threadid ="+data.thread_id+"] .uk-comment-title").addClass("unread-name");$(".open-thread[data-threadid ="+data.thread_id+"] .uk-comment-title .seen-placeholder").html(' - <i class="uk-icon-eye-slash"></i> Nepročitana');var d=new Date;$("time").attr("datetime",d.toISOString()).timeago();var thread_link=$(".open-thread[data-threadid ="+data.thread_id+"]");var article=thread_link.parents().closest("article.uk-comment");article.addClass("unread-message");var clone=thread_link.parents().closest("div.thread").clone();thread_link.closest("div.thread").remove();$(".threads-holder").prepend(clone)}else if(data.message_type=="image"){if(data.text.includes("<")||data.text.includes(">")){data.text=""}text_holder.html('<img class="thumbnail-image uk-thumbnail" src="/user-images/inbox/'+data.thread_id+"/"+data.text+'"  style="max-height: 100px" />');text_holder.attr("data-messageid",data.messageId)}else{text_holder.html(' <i class="uk-icon-file-pdf-o uk-text-danger uk-text-large"></i> PDF - Dokument');text_holder.attr("data-messageid",data.messageId)}},createNewThread:function(data){var new_thread=$(".thread-template #thread").clone();new_thread.addClass("thread_"+data.thread_id);$(".threads-holder").prepend(new_thread);$(".thread_"+data.thread_id+" .thread-data-holder .message-check").attr("id",data.thread_id);$(".thread_"+data.thread_id+"  .open-thread").attr("data-threadid",data.thread_id);$(".thread_"+data.thread_id+" .message-check").attr("data-id",data.thread_id);var d=new Date;$(".thread_"+data.thread_id+"  .open-thread .thread-data-holder .uk-comment-meta time").attr("datetime",d.toISOString()).timeago();if(data.sender_fb_uid==null||data.sender_fb_uid=="null"){var fb_image='<img class="uk-comment-avatar" src="/bundles/site/images/dummy/user1.png" >'}else{var fb_image='<img class="uk-comment-avatar" src="//graph.facebook.com/v12.0/'+data.sender_fb_uid+'/picture?width=64&height=64" >'}$(".thread_"+data.thread_id+"  .open-thread .thread-data-holder .uk-comment-title ").html(data.sender_name+'<small> - <i class="uk-icon-eye-slash"></i> Nepročitana</small>');$(".thread_"+data.thread_id+" .open-thread .uk-comment-body ").text(data.text);$(".thread_"+data.thread_id+"  .open-thread .thread-data-holder .uk-comment-title ").prepend(fb_image);if($(".no-threads").length==1){$(".no-threads").remove()}},removeUrlParameter:function(url,parameter){var urlparts=url.split("?");if(urlparts.length>=2){var prefix=encodeURIComponent(parameter)+"=";var pars=urlparts[1].split(/[&;]/g);for(var i=pars.length;i-- >0;){if(pars[i].lastIndexOf(prefix,0)!==-1){pars.splice(i,1)}}url=urlparts[0]+(pars.length>0?"?"+pars.join("&"):"")}window.history.replaceState({},"",url)},openThreadFromGetParameter:function(threadId,userId){var backLimit=$(".thread-data-holder").length;PA.common.loaderStart();$.get("/inbox/thread/"+threadId+"?userId="+userId+"&backLimit="+backLimit,function(response){if(!response.error){PA.message.removeUrlParameter(window.location.href,"thread");$("#profile-content").html(response);PA.common.loaderStop()}else{PA.common.loaderStop();UIkit.modal.alert(response.message);return false}PA.common.loaderStop()}).done(function(){$(".messages-holder").scrollTop(1e4);$(".messages-holder").linkify({target:"_blank"})})},fixBodyScroll:function(){$(".thread").on("click",function(){$("body").addClass("fixScroll")});$("#back-to-threads").on("click",function(){$("body").removeClass("fixScroll")})},massQueryOffer:function(){$(".send-offer").on("click",function(){$("#message_reply").html("");var type=$(this).data("type");if(type==="yes"){var message="Poštovani, imam ono što tražite<br /><b>Cena:</b><br /><b>Stanje(novo/polovno):</b><br /><b>Dodatna poruka:</b><br/>"}else{message="Poštovani, na žalost nemam ono što tražite. Srdačan pozdrav."}$("#message_reply").append(message);$("#message_reply").height(130)})},askToDisableOffers:function(){if(typeof $.cookie("askedToDisableOffers")!="undefined"){return false}$.get("/korisnicki-profil/checkDisableOffers",function(response){if(response.askToDisable==true){ga("send","event","Korisnicki profil","view","Prikaz obaveštenja za gašenje primanja ponude");UIkit.modal.confirm("Da li želiš da onemogućiš primanje ponude od strane prodavaca s obzirom da nisi odgovorio na poslednjih 5 ponuda za oglase koje si sačuvao?",function(){ga("send","event","Korisnicki profil","click","Obaveštenje za gašenje primanja ponude - želim");$.post("/korisnicki-profil/disableOffers",function(resposne){UIkit.modal.alert($(".js-approve-offer-disabled").html(),{labels:{Ok:"U redu"}})})},function(){ga("send","event","Korisnicki profil","click","Obaveštenje za gašenje primanja ponude - ne želim");$.cookie("askedToDisableOffers",1,{path:"/",expires:30})},{labels:{Ok:"Želim",Cancel:"Ne želim"}})}})},getUrlParameter:function(sParam){var sPageURL=decodeURIComponent(window.location.search.substring(1)),sURLVariables=sPageURL.split("&"),sParameterName,i;for(i=0;i<sURLVariables.length;i++){sParameterName=sURLVariables[i].split("=");if(sParameterName[0]===sParam){return sParameterName[1]===undefined?true:sParameterName[1]}}},showUnread:function(ws,backLimit){$(".js-show-unread").on("click",function(){PA.common.dataLayerEvent("prikazi_neprocitane_poruke");if($(this).is(":checked")){var status="unread"}else{var status="all";backLimit=10}PA.message.reloadThreads(ws,backLimit,status)})},templateDIO:function(cellphone){$("#js-dio-templates-holder").show(function(){ga("send","event","Inbox","view","Prikazan šablon",{nonInteraction:1})});$(".js-dio-template-offer").on("click",function(){var choice=$(this).data("template");var replyField=$("#message_reply");var currentValue=replyField.val();var message="";if(choice==="stock"){message="Poštovani, trenutno traženi deo nemamo na stanju.\n"}else if(choice==="price"){message="Cena traženog dela je:\n"}else if(choice==="offer-info"){message="Za informacije o ponudi možete pozvati na "+cellphone+" u periodu:\n"}replyField.val(currentValue+message)})}};
var PA=PA||{};PA.user={showUserContactDataModal:function(){$("body").append('<div id="update-dealer-data" style="display: none;"></div>');var dealerDataHolder=$("#update-dealer-data");$.post("/user/contactData/PopupDate");$.get("/user/contactData",function(response){dealerDataHolder.html(response);PA.user.ddh=UIkit.modal.dialog(dealerDataHolder.html());PA.user.ddh.show();$(document).on("click",".js-close_data_dialog",function(){PA.user.ddh.hide()});$(document).on("click",".js-submit_data_dialog",function(){$.post("/user/contactData",$(".update-data-form").serialize(),function(data){PA.user.ddh.hide();if(data.success!==true){PA.user.ddh=UIkit.modal.dialog(data).show()}})})})},ddh:null};
(function(){"use strict";var defaults={mode:"lg-slide",cssEasing:"ease",easing:"linear",speed:600,height:"100%",width:"100%",addClass:"",startClass:"lg-start-zoom",backdropDuration:150,hideBarsDelay:6e3,useLeft:false,closable:true,loop:true,escKey:true,keyPress:true,controls:true,slideEndAnimatoin:true,hideControlOnEnd:false,mousewheel:true,getCaptionFromTitleOrAlt:true,appendSubHtmlTo:".lg-sub-html",subHtmlSelectorRelative:false,preload:1,showAfterLoad:true,selector:"",selectWithin:"",nextHtml:"",prevHtml:"",index:false,iframeMaxWidth:"100%",download:false,counter:true,appendCounterTo:".lg-toolbar",swipeThreshold:50,enableSwipe:true,enableDrag:true,dynamic:false,dynamicEl:[],galleryId:1};function Plugin(element,options){this.el=element;this.$el=$(element);this.s=$.extend({},defaults,options);if(this.s.dynamic&&this.s.dynamicEl!=="undefined"&&this.s.dynamicEl.constructor===Array&&!this.s.dynamicEl.length){throw"When using dynamic mode, you must also define dynamicEl as an Array."}this.modules={};this.lGalleryOn=false;this.lgBusy=false;this.hideBartimeout=false;this.isTouch="ontouchstart"in document.documentElement;if(this.s.slideEndAnimatoin){this.s.hideControlOnEnd=false}if(this.s.dynamic){this.$items=this.s.dynamicEl}else{if(this.s.selector==="this"){this.$items=this.$el}else if(this.s.selector!==""){if(this.s.selectWithin){this.$items=$(this.s.selectWithin).find(this.s.selector)}else{this.$items=this.$el.find($(this.s.selector))}}else{this.$items=this.$el.children()}}this.$slide="";this.$outer="";this.init();return this}Plugin.prototype.init=function(){var _this=this;if(_this.s.preload>_this.$items.length){_this.s.preload=_this.$items.length}var _hash=window.location.hash;if(_hash.indexOf("lg="+this.s.galleryId)>0){_this.index=parseInt(_hash.split("&slide=")[1],10);$("body").addClass("lg-from-hash");if(!$("body").hasClass("lg-on")){setTimeout(function(){_this.build(_this.index)});$("body").addClass("lg-on")}}if(_this.s.dynamic){_this.$el.trigger("onBeforeOpen.lg");_this.index=_this.s.index||0;if(!$("body").hasClass("lg-on")){setTimeout(function(){_this.build(_this.index);$("body").addClass("lg-on")})}}else{_this.$items.on("click.lgcustom",function(event){try{event.preventDefault();event.preventDefault()}catch(er){event.returnValue=false}_this.$el.trigger("onBeforeOpen.lg");_this.index=_this.s.index||_this.$items.index(this);if(!$("body").hasClass("lg-on")){_this.build(_this.index);$("body").addClass("lg-on")}})}};Plugin.prototype.build=function(index){var _this=this;_this.structure();$.each($.fn.lightGallery.modules,function(key){_this.modules[key]=new $.fn.lightGallery.modules[key](_this.el)});_this.slide(index,false,false,false);if(_this.s.keyPress){_this.keyPress()}if(_this.$items.length>1){_this.arrow();setTimeout(function(){_this.enableDrag();_this.enableSwipe()},50);if(_this.s.mousewheel){_this.mousewheel()}}else{_this.$slide.on("click.lg",function(){_this.$el.trigger("onSlideClick.lg")})}_this.counter();_this.closeGallery();_this.$el.trigger("onAfterOpen.lg");_this.$outer.on("mousemove.lg click.lg touchstart.lg",function(){_this.$outer.removeClass("lg-hide-items");clearTimeout(_this.hideBartimeout);_this.hideBartimeout=setTimeout(function(){_this.$outer.addClass("lg-hide-items")},_this.s.hideBarsDelay)});_this.$outer.trigger("mousemove.lg")};Plugin.prototype.structure=function(){var list="";var controls="";var i=0;var subHtmlCont="";var template;var _this=this;$("body").append('<div class="lg-backdrop"></div>');$(".lg-backdrop").css("transition-duration",this.s.backdropDuration+"ms");for(i=0;i<this.$items.length;i++){list+='<div class="lg-item"></div>'}if(this.s.controls&&this.$items.length>1){controls='<div class="lg-actions">'+'<button class="lg-prev lg-icon">'+this.s.prevHtml+"</button>"+'<button class="lg-next lg-icon">'+this.s.nextHtml+"</button>"+"</div>"}if(this.s.appendSubHtmlTo===".lg-sub-html"){subHtmlCont='<div class="lg-sub-html"></div>'}template='<div class="lg-outer '+this.s.addClass+" "+this.s.startClass+'">'+'<div class="lg" style="width:'+this.s.width+"; height:"+this.s.height+'">'+'<div class="lg-inner">'+list+"</div>"+'<div class="lg-toolbar lg-group">'+'<span class="lg-close lg-icon"></span>'+"</div>"+controls+subHtmlCont+"</div>"+"</div>";$("body").append(template);this.$outer=$(".lg-outer");this.$slide=this.$outer.find(".lg-item");if(this.s.useLeft){this.$outer.addClass("lg-use-left");this.s.mode="lg-slide"}else{this.$outer.addClass("lg-use-css3")}_this.setTop();$(window).on("resize.lg orientationchange.lg",function(){setTimeout(function(){_this.setTop()},100)});this.$slide.eq(this.index).addClass("lg-current");if(this.doCss()){this.$outer.addClass("lg-css3")}else{this.$outer.addClass("lg-css");this.s.speed=0}this.$outer.addClass(this.s.mode);if(this.s.enableDrag&&this.$items.length>1){this.$outer.addClass("lg-grab")}if(this.s.showAfterLoad){this.$outer.addClass("lg-show-after-load")}if(this.doCss()){var $inner=this.$outer.find(".lg-inner");$inner.css("transition-timing-function",this.s.cssEasing);$inner.css("transition-duration",this.s.speed+"ms")}setTimeout(function(){$(".lg-backdrop").addClass("in")});setTimeout(function(){_this.$outer.addClass("lg-visible")},this.s.backdropDuration);if(this.s.download){this.$outer.find(".lg-toolbar").append('<a id="lg-download" target="_blank" download class="lg-download lg-icon"></a>')}this.prevScrollTop=$(window).scrollTop()};Plugin.prototype.setTop=function(){if(this.s.height!=="100%"){var wH=$(window).height();var top=(wH-parseInt(this.s.height,10))/2;var $lGallery=this.$outer.find(".lg");if(wH>=parseInt(this.s.height,10)){$lGallery.css("top",top+"px")}else{$lGallery.css("top","0px")}}};Plugin.prototype.doCss=function(){var support=function(){var transition=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"];var root=document.documentElement;var i=0;for(i=0;i<transition.length;i++){if(transition[i]in root.style){return true}}};if(support()){return true}return false};Plugin.prototype.isVideo=function(src,index){var html;if(this.s.dynamic){html=this.s.dynamicEl[index].html}else{html=this.$items.eq(index).attr("data-html")}if(!src){if(html){return{html5:true}}else{console.error("lightGallery :- data-src is not pvovided on slide item "+(index+1)+". Please make sure the selector property is properly configured. More info - http://sachinchoolur.github.io/lightGallery/demos/html-markup.html");return false}}var youtube=src.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)/i);var vimeo=src.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i);var dailymotion=src.match(/\/\/(?:www\.)?dai.ly\/([0-9a-z\-_]+)/i);var vk=src.match(/\/\/(?:www\.)?(?:vk\.com|vkontakte\.ru)\/(?:video_ext\.php\?)(.*)/i);if(youtube){return{youtube:youtube}}else if(vimeo){return{vimeo:vimeo}}else if(dailymotion){return{dailymotion:dailymotion}}else if(vk){return{vk:vk}}};Plugin.prototype.counter=function(){if(this.s.counter){$(this.s.appendCounterTo).append('<div id="lg-counter"><span id="lg-counter-current">'+(parseInt(this.index,10)+1)+'</span> / <span id="lg-counter-all">'+this.$items.length+"</span></div>")}};Plugin.prototype.addHtml=function(index){var subHtml=null;var subHtmlUrl;var $currentEle;if(this.s.dynamic){if(this.s.dynamicEl[index].subHtmlUrl){subHtmlUrl=this.s.dynamicEl[index].subHtmlUrl}else{subHtml=this.s.dynamicEl[index].subHtml}}else{$currentEle=this.$items.eq(index);if($currentEle.attr("data-sub-html-url")){subHtmlUrl=$currentEle.attr("data-sub-html-url")}else{subHtml=$currentEle.attr("data-sub-html");if(this.s.getCaptionFromTitleOrAlt&&!subHtml){subHtml=$currentEle.attr("title")||$currentEle.find("img").first().attr("alt")}}}if(!subHtmlUrl){if(typeof subHtml!=="undefined"&&subHtml!==null){var fL=subHtml.substring(0,1);if(fL==="."||fL==="#"){if(this.s.subHtmlSelectorRelative&&!this.s.dynamic){subHtml=$currentEle.find(subHtml).html()}else{subHtml=$(subHtml).html()}}}else{subHtml=""}}if(this.s.appendSubHtmlTo===".lg-sub-html"){if(subHtmlUrl){this.$outer.find(this.s.appendSubHtmlTo).load(subHtmlUrl)}else{this.$outer.find(this.s.appendSubHtmlTo).html(subHtml)}}else{if(subHtmlUrl){this.$slide.eq(index).load(subHtmlUrl)}else{this.$slide.eq(index).append(subHtml)}}if(typeof subHtml!=="undefined"&&subHtml!==null){if(subHtml===""){this.$outer.find(this.s.appendSubHtmlTo).addClass("lg-empty-html")}else{this.$outer.find(this.s.appendSubHtmlTo).removeClass("lg-empty-html")}}this.$el.trigger("onAfterAppendSubHtml.lg",[index])};Plugin.prototype.preload=function(index){var i=1;var j=1;for(i=1;i<=this.s.preload;i++){if(i>=this.$items.length-index){break}this.loadContent(index+i,false,0)}for(j=1;j<=this.s.preload;j++){if(index-j<0){break}this.loadContent(index-j,false,0)}};Plugin.prototype.loadContent=function(index,rec,delay){var _this=this;var _hasPoster=false;var _$img;var _src;var _poster;var _srcset;var _sizes;var _html;var getResponsiveSrc=function(srcItms){var rsWidth=[];var rsSrc=[];for(var i=0;i<srcItms.length;i++){var __src=srcItms[i].split(" ");if(__src[0]===""){__src.splice(0,1)}rsSrc.push(__src[0]);rsWidth.push(__src[1])}var wWidth=$(window).width();for(var j=0;j<rsWidth.length;j++){if(parseInt(rsWidth[j],10)>wWidth){_src=rsSrc[j];break}}};if(_this.s.dynamic){if(_this.s.dynamicEl[index].poster){_hasPoster=true;_poster=_this.s.dynamicEl[index].poster}_html=_this.s.dynamicEl[index].html;_src=_this.s.dynamicEl[index].src;if(_this.s.dynamicEl[index].responsive){var srcDyItms=_this.s.dynamicEl[index].responsive.split(",");getResponsiveSrc(srcDyItms)}_srcset=_this.s.dynamicEl[index].srcset;_sizes=_this.s.dynamicEl[index].sizes}else{if(_this.$items.eq(index).attr("data-poster")){_hasPoster=true;_poster=_this.$items.eq(index).attr("data-poster")}_html=_this.$items.eq(index).attr("data-html");_src=_this.$items.eq(index).attr("href")||_this.$items.eq(index).attr("data-src");if(_this.$items.eq(index).attr("data-responsive")){var srcItms=_this.$items.eq(index).attr("data-responsive").split(",");getResponsiveSrc(srcItms)}_srcset=_this.$items.eq(index).attr("data-srcset");_sizes=_this.$items.eq(index).attr("data-sizes")}var iframe=false;if(_this.s.dynamic){if(_this.s.dynamicEl[index].iframe){iframe=true}}else{if(_this.$items.eq(index).attr("data-iframe")==="true"){iframe=true}}var _isVideo=_this.isVideo(_src,index);if(!_this.$slide.eq(index).hasClass("lg-loaded")){if(iframe){_this.$slide.eq(index).prepend('<div class="lg-video-cont lg-has-iframe" style="max-width:'+_this.s.iframeMaxWidth+'"><div class="lg-video"><iframe class="lg-object" frameborder="0" src="'+_src+'"  allowfullscreen="true"></iframe></div></div>')}else if(_hasPoster){var videoClass="";if(_isVideo&&_isVideo.youtube){videoClass="lg-has-youtube"}else if(_isVideo&&_isVideo.vimeo){videoClass="lg-has-vimeo"}else{videoClass="lg-has-html5"}_this.$slide.eq(index).prepend('<div class="lg-video-cont '+videoClass+' "><div class="lg-video"><span class="lg-video-play"></span><img class="lg-object lg-has-poster" src="'+_poster+'" /></div></div>')}else if(_isVideo){_this.$slide.eq(index).prepend('<div class="lg-video-cont "><div class="lg-video"></div></div>');_this.$el.trigger("hasVideo.lg",[index,_src,_html])}else{_this.$slide.eq(index).prepend('<div class="lg-img-wrap"><img class="lg-object lg-image" src="'+_src+'" /></div>')}_this.$el.trigger("onAferAppendSlide.lg",[index]);_$img=_this.$slide.eq(index).find(".lg-object");if(_sizes){_$img.attr("sizes",_sizes)}if(_srcset){_$img.attr("srcset",_srcset);try{picturefill({elements:[_$img[0]]})}catch(e){console.warn("lightGallery :- If you want srcset to be supported for older browser please include picturefil version 2 javascript library in your document.")}}if(this.s.appendSubHtmlTo!==".lg-sub-html"){_this.addHtml(index)}_this.$slide.eq(index).addClass("lg-loaded")}_this.$slide.eq(index).find(".lg-object").on("load.lg error.lg",function(){var _speed=0;if(delay&&!$("body").hasClass("lg-from-hash")){_speed=delay}setTimeout(function(){_this.$slide.eq(index).addClass("lg-complete");_this.$el.trigger("onSlideItemLoad.lg",[index,delay||0])},_speed)});if(_isVideo&&_isVideo.html5&&!_hasPoster){_this.$slide.eq(index).addClass("lg-complete")}if(rec===true){if(!_this.$slide.eq(index).hasClass("lg-complete")){_this.$slide.eq(index).find(".lg-object").on("load.lg error.lg",function(){_this.preload(index)})}else{_this.preload(index)}}};Plugin.prototype.slide=function(index,fromTouch,fromThumb,direction){var _prevIndex=this.$outer.find(".lg-current").index();var _this=this;if(_this.lGalleryOn&&_prevIndex===index){return}var _length=this.$slide.length;var _time=_this.lGalleryOn?this.s.speed:0;if(!_this.lgBusy){if(this.s.download){var _src;if(_this.s.dynamic){_src=_this.s.dynamicEl[index].downloadUrl!==false&&(_this.s.dynamicEl[index].downloadUrl||_this.s.dynamicEl[index].src)}else{_src=_this.$items.eq(index).attr("data-download-url")!=="false"&&(_this.$items.eq(index).attr("data-download-url")||_this.$items.eq(index).attr("href")||_this.$items.eq(index).attr("data-src"))}if(_src){$("#lg-download").attr("href",_src);_this.$outer.removeClass("lg-hide-download")}else{_this.$outer.addClass("lg-hide-download")}}this.$el.trigger("onBeforeSlide.lg",[_prevIndex,index,fromTouch,fromThumb]);_this.lgBusy=true;clearTimeout(_this.hideBartimeout);if(this.s.appendSubHtmlTo===".lg-sub-html"){setTimeout(function(){_this.addHtml(index)},_time)}this.arrowDisable(index);if(!direction){if(index<_prevIndex){direction="prev"}else if(index>_prevIndex){direction="next"}}if(!fromTouch){_this.$outer.addClass("lg-no-trans");this.$slide.removeClass("lg-prev-slide lg-next-slide");if(direction==="prev"){this.$slide.eq(index).addClass("lg-prev-slide");this.$slide.eq(_prevIndex).addClass("lg-next-slide")}else{this.$slide.eq(index).addClass("lg-next-slide");this.$slide.eq(_prevIndex).addClass("lg-prev-slide")}setTimeout(function(){_this.$slide.removeClass("lg-current");_this.$slide.eq(index).addClass("lg-current");_this.$outer.removeClass("lg-no-trans")},50)}else{this.$slide.removeClass("lg-prev-slide lg-current lg-next-slide");var touchPrev;var touchNext;if(_length>2){touchPrev=index-1;touchNext=index+1;if(index===0&&_prevIndex===_length-1){touchNext=0;touchPrev=_length-1}else if(index===_length-1&&_prevIndex===0){touchNext=0;touchPrev=_length-1}}else{touchPrev=0;touchNext=1}if(direction==="prev"){_this.$slide.eq(touchNext).addClass("lg-next-slide")}else{_this.$slide.eq(touchPrev).addClass("lg-prev-slide")}_this.$slide.eq(index).addClass("lg-current")}if(_this.lGalleryOn){setTimeout(function(){_this.loadContent(index,true,0)},this.s.speed+50);setTimeout(function(){_this.lgBusy=false;_this.$el.trigger("onAfterSlide.lg",[_prevIndex,index,fromTouch,fromThumb])},this.s.speed)}else{_this.loadContent(index,true,_this.s.backdropDuration);_this.lgBusy=false;_this.$el.trigger("onAfterSlide.lg",[_prevIndex,index,fromTouch,fromThumb])}_this.lGalleryOn=true;if(this.s.counter){$("#lg-counter-current").text(index+1)}}};Plugin.prototype.goToNextSlide=function(fromTouch){var _this=this;var _loop=_this.s.loop;if(fromTouch&&_this.$slide.length<3){_loop=false}if(!_this.lgBusy){if(_this.index+1<_this.$slide.length){_this.index++;_this.$el.trigger("onBeforeNextSlide.lg",[_this.index]);_this.slide(_this.index,fromTouch,false,"next")}else{if(_loop){_this.index=0;_this.$el.trigger("onBeforeNextSlide.lg",[_this.index]);_this.slide(_this.index,fromTouch,false,"next")}else if(_this.s.slideEndAnimatoin&&!fromTouch){_this.$outer.addClass("lg-right-end");setTimeout(function(){_this.$outer.removeClass("lg-right-end")},400)}}}};Plugin.prototype.goToPrevSlide=function(fromTouch){var _this=this;var _loop=_this.s.loop;if(fromTouch&&_this.$slide.length<3){_loop=false}if(!_this.lgBusy){if(_this.index>0){_this.index--;_this.$el.trigger("onBeforePrevSlide.lg",[_this.index,fromTouch]);_this.slide(_this.index,fromTouch,false,"prev")}else{if(_loop){_this.index=_this.$items.length-1;_this.$el.trigger("onBeforePrevSlide.lg",[_this.index,fromTouch]);_this.slide(_this.index,fromTouch,false,"prev")}else if(_this.s.slideEndAnimatoin&&!fromTouch){_this.$outer.addClass("lg-left-end");setTimeout(function(){_this.$outer.removeClass("lg-left-end")},400)}}}};Plugin.prototype.keyPress=function(){var _this=this;if(this.$items.length>1){$(window).on("keyup.lg",function(e){if(_this.$items.length>1){if(e.keyCode===37){e.preventDefault();_this.goToPrevSlide()}if(e.keyCode===39){e.preventDefault();_this.goToNextSlide()}}})}$(window).on("keydown.lg",function(e){if(_this.s.escKey===true&&e.keyCode===27){e.preventDefault();if(!_this.$outer.hasClass("lg-thumb-open")){_this.destroy()}else{_this.$outer.removeClass("lg-thumb-open")}}})};Plugin.prototype.arrow=function(){var _this=this;this.$outer.find(".lg-prev").on("click.lg",function(){_this.goToPrevSlide()});this.$outer.find(".lg-next").on("click.lg",function(){_this.goToNextSlide()})};Plugin.prototype.arrowDisable=function(index){if(!this.s.loop&&this.s.hideControlOnEnd){if(index+1<this.$slide.length){this.$outer.find(".lg-next").removeAttr("disabled").removeClass("disabled")}else{this.$outer.find(".lg-next").attr("disabled","disabled").addClass("disabled")}if(index>0){this.$outer.find(".lg-prev").removeAttr("disabled").removeClass("disabled")}else{this.$outer.find(".lg-prev").attr("disabled","disabled").addClass("disabled")}}};Plugin.prototype.setTranslate=function($el,xValue,yValue){if(this.s.useLeft){$el.css("left",xValue)}else{$el.css({transform:"translate3d("+xValue+"px, "+yValue+"px, 0px)"})}};Plugin.prototype.touchMove=function(startCoords,endCoords){var distance=endCoords-startCoords;if(Math.abs(distance)>15){this.$outer.addClass("lg-dragging");this.setTranslate(this.$slide.eq(this.index),distance,0);this.setTranslate($(".lg-prev-slide"),-this.$slide.eq(this.index).width()+distance,0);this.setTranslate($(".lg-next-slide"),this.$slide.eq(this.index).width()+distance,0)}};Plugin.prototype.touchEnd=function(distance){var _this=this;if(_this.s.mode!=="lg-slide"){_this.$outer.addClass("lg-slide")}this.$slide.not(".lg-current, .lg-prev-slide, .lg-next-slide").css("opacity","0");setTimeout(function(){_this.$outer.removeClass("lg-dragging");if(distance<0&&Math.abs(distance)>_this.s.swipeThreshold){_this.goToNextSlide(true)}else if(distance>0&&Math.abs(distance)>_this.s.swipeThreshold){_this.goToPrevSlide(true)}else if(Math.abs(distance)<5){_this.$el.trigger("onSlideClick.lg")}_this.$slide.removeAttr("style")});setTimeout(function(){if(!_this.$outer.hasClass("lg-dragging")&&_this.s.mode!=="lg-slide"){_this.$outer.removeClass("lg-slide")}},_this.s.speed+100)};Plugin.prototype.enableSwipe=function(){var _this=this;var startCoords=0;var endCoords=0;var isMoved=false;if(_this.s.enableSwipe&&_this.isTouch&&_this.doCss()){_this.$slide.on("touchstart.lg",function(e){if(!_this.$outer.hasClass("lg-zoomed")&&!_this.lgBusy){e.preventDefault();_this.manageSwipeClass();startCoords=e.originalEvent.targetTouches[0].pageX}});_this.$slide.on("touchmove.lg",function(e){if(!_this.$outer.hasClass("lg-zoomed")){e.preventDefault();endCoords=e.originalEvent.targetTouches[0].pageX;_this.touchMove(startCoords,endCoords);isMoved=true}});_this.$slide.on("touchend.lg",function(){if(!_this.$outer.hasClass("lg-zoomed")){if(isMoved){isMoved=false;_this.touchEnd(endCoords-startCoords)}else{_this.$el.trigger("onSlideClick.lg")}}})}};Plugin.prototype.enableDrag=function(){var _this=this;var startCoords=0;var endCoords=0;var isDraging=false;var isMoved=false;if(_this.s.enableDrag&&!_this.isTouch&&_this.doCss()){_this.$slide.on("mousedown.lg",function(e){if(!_this.$outer.hasClass("lg-zoomed")){if($(e.target).hasClass("lg-object")||$(e.target).hasClass("lg-video-play")){e.preventDefault();if(!_this.lgBusy){_this.manageSwipeClass();startCoords=e.pageX;isDraging=true;_this.$outer.scrollLeft+=1;_this.$outer.scrollLeft-=1;_this.$outer.removeClass("lg-grab").addClass("lg-grabbing");_this.$el.trigger("onDragstart.lg")}}}});$(window).on("mousemove.lg",function(e){if(isDraging){isMoved=true;endCoords=e.pageX;_this.touchMove(startCoords,endCoords);_this.$el.trigger("onDragmove.lg")}});$(window).on("mouseup.lg",function(e){if(isMoved){isMoved=false;_this.touchEnd(endCoords-startCoords);_this.$el.trigger("onDragend.lg")}else if($(e.target).hasClass("lg-object")||$(e.target).hasClass("lg-video-play")){_this.$el.trigger("onSlideClick.lg")}if(isDraging){isDraging=false;_this.$outer.removeClass("lg-grabbing").addClass("lg-grab")}})}};Plugin.prototype.manageSwipeClass=function(){var _touchNext=this.index+1;var _touchPrev=this.index-1;if(this.s.loop&&this.$slide.length>2){if(this.index===0){_touchPrev=this.$slide.length-1}else if(this.index===this.$slide.length-1){_touchNext=0}}this.$slide.removeClass("lg-next-slide lg-prev-slide");if(_touchPrev>-1){this.$slide.eq(_touchPrev).addClass("lg-prev-slide")}this.$slide.eq(_touchNext).addClass("lg-next-slide")};Plugin.prototype.mousewheel=function(){var _this=this;_this.$outer.on("mousewheel.lg",function(e){if(!e.deltaY){return}if(e.deltaY>0){_this.goToPrevSlide()}else{_this.goToNextSlide()}e.preventDefault()})};Plugin.prototype.closeGallery=function(){var _this=this;var mousedown=false;this.$outer.find(".lg-close").on("click.lg",function(){_this.destroy()});if(_this.s.closable){_this.$outer.on("mousedown.lg",function(e){if($(e.target).is(".lg-outer")||$(e.target).is(".lg-item ")||$(e.target).is(".lg-img-wrap")){mousedown=true}else{mousedown=false}});_this.$outer.on("mouseup.lg",function(e){if($(e.target).is(".lg-outer")||$(e.target).is(".lg-item ")||$(e.target).is(".lg-img-wrap")&&mousedown){if(!_this.$outer.hasClass("lg-dragging")){_this.destroy()}}})}};Plugin.prototype.destroy=function(d){var _this=this;if(!d){_this.$el.trigger("onBeforeClose.lg");$(window).scrollTop(_this.prevScrollTop)}if(d){if(!_this.s.dynamic){this.$items.off("click.lg click.lgcustom")}$.removeData(_this.el,"lightGallery")}this.$el.off(".lg.tm");$.each($.fn.lightGallery.modules,function(key){if(_this.modules[key]){_this.modules[key].destroy()}});this.lGalleryOn=false;clearTimeout(_this.hideBartimeout);this.hideBartimeout=false;$(window).off(".lg");$("body").removeClass("lg-on lg-from-hash");if(_this.$outer){_this.$outer.removeClass("lg-visible")}$(".lg-backdrop").removeClass("in");setTimeout(function(){if(_this.$outer){_this.$outer.remove()}$(".lg-backdrop").remove();if(!d){_this.$el.trigger("onCloseAfter.lg")}},_this.s.backdropDuration+50)};$.fn.lightGallery=function(options){return this.each(function(){if(!$.data(this,"lightGallery")){$.data(this,"lightGallery",new Plugin(this,options))}else{try{$(this).data("lightGallery").init()}catch(err){console.error("lightGallery has not initiated properly")}}})};$.fn.lightGallery.modules={}})();
(function($,window,document,undefined){"use strict";var defaults={fullScreen:true};var Fullscreen=function(element){this.core=$(element).data("lightGallery");this.$el=$(element);this.core.s=$.extend({},defaults,this.core.s);this.init();return this};Fullscreen.prototype.init=function(){var fullScreen="";if(this.core.s.fullScreen){if(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled&&!document.mozFullScreenEnabled&&!document.msFullscreenEnabled){return}else{fullScreen='<span class="lg-fullscreen lg-icon"></span>';this.core.$outer.find(".lg-toolbar").append(fullScreen);this.fullScreen()}}};Fullscreen.prototype.requestFullscreen=function(){var el=document.documentElement;if(el.requestFullscreen){el.requestFullscreen()}else if(el.msRequestFullscreen){el.msRequestFullscreen()}else if(el.mozRequestFullScreen){el.mozRequestFullScreen()}else if(el.webkitRequestFullscreen){el.webkitRequestFullscreen()}};Fullscreen.prototype.exitFullscreen=function(){if(document.exitFullscreen){document.exitFullscreen()}else if(document.msExitFullscreen){document.msExitFullscreen()}else if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else if(document.webkitExitFullscreen){document.webkitExitFullscreen()}};Fullscreen.prototype.fullScreen=function(){var _this=this;$(document).on("fullscreenchange.lg webkitfullscreenchange.lg mozfullscreenchange.lg MSFullscreenChange.lg",function(){_this.core.$outer.toggleClass("lg-fullscreen-on")});this.core.$outer.find(".lg-fullscreen").on("click.lg",function(){if(!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement){_this.requestFullscreen()}else{_this.exitFullscreen()}})};Fullscreen.prototype.destroy=function(){this.exitFullscreen();$(document).off("fullscreenchange.lg webkitfullscreenchange.lg mozfullscreenchange.lg MSFullscreenChange.lg")};$.fn.lightGallery.modules.fullscreen=Fullscreen})(jQuery,window,document);
(function(){"use strict";var defaults={thumbnail:true,animateThumb:true,currentPagerPosition:"middle",thumbWidth:100,thumbContHeight:100,thumbMargin:5,exThumbImage:false,showThumbByDefault:true,toogleThumb:true,pullCaptionUp:true,enableThumbDrag:true,enableThumbSwipe:true,swipeThreshold:50,loadYoutubeThumbnail:true,youtubeThumbSize:1,loadVimeoThumbnail:true,vimeoThumbSize:"thumbnail_small",loadDailymotionThumbnail:true};var Thumbnail=function(element){this.core=$(element).data("lightGallery");this.core.s=$.extend({},defaults,this.core.s);this.$el=$(element);this.$thumbOuter=null;this.thumbOuterWidth=0;this.thumbTotalWidth=this.core.$items.length*(this.core.s.thumbWidth+this.core.s.thumbMargin);this.thumbIndex=this.core.index;this.left=0;this.init();return this};Thumbnail.prototype.init=function(){var _this=this;if(this.core.s.thumbnail&&this.core.$items.length>1){if(this.core.s.showThumbByDefault){setTimeout(function(){_this.core.$outer.addClass("lg-thumb-open")},700)}if(this.core.s.pullCaptionUp){this.core.$outer.addClass("lg-pull-caption-up")}this.build();if(this.core.s.animateThumb){if(this.core.s.enableThumbDrag&&!this.core.isTouch&&this.core.doCss()){this.enableThumbDrag()}if(this.core.s.enableThumbSwipe&&this.core.isTouch&&this.core.doCss()){this.enableThumbSwipe()}this.thumbClickable=false}else{this.thumbClickable=true}this.toogle();this.thumbkeyPress()}};Thumbnail.prototype.build=function(){var _this=this;var thumbList="";var vimeoErrorThumbSize="";var $thumb;var html='<div class="lg-thumb-outer">'+'<div class="lg-thumb lg-group">'+"</div>"+"</div>";switch(this.core.s.vimeoThumbSize){case"thumbnail_large":vimeoErrorThumbSize="640";break;case"thumbnail_medium":vimeoErrorThumbSize="200x150";break;case"thumbnail_small":vimeoErrorThumbSize="100x75"}_this.core.$outer.addClass("lg-has-thumb");_this.core.$outer.find(".lg").append(html);_this.$thumbOuter=_this.core.$outer.find(".lg-thumb-outer");_this.thumbOuterWidth=_this.$thumbOuter.width();if(_this.core.s.animateThumb){_this.core.$outer.find(".lg-thumb").css({width:_this.thumbTotalWidth+"px",position:"relative"})}if(this.core.s.animateThumb){_this.$thumbOuter.css("height",_this.core.s.thumbContHeight+"px")}function getThumb(src,thumb,index){var isVideo=_this.core.isVideo(src,index)||{};var thumbImg;var vimeoId="";if(isVideo.youtube||isVideo.vimeo||isVideo.dailymotion){if(isVideo.youtube){if(_this.core.s.loadYoutubeThumbnail){thumbImg="//img.youtube.com/vi/"+isVideo.youtube[1]+"/"+_this.core.s.youtubeThumbSize+".jpg"}else{thumbImg=thumb}}else if(isVideo.vimeo){if(_this.core.s.loadVimeoThumbnail){thumbImg="//i.vimeocdn.com/video/error_"+vimeoErrorThumbSize+".jpg";vimeoId=isVideo.vimeo[1]}else{thumbImg=thumb}}else if(isVideo.dailymotion){if(_this.core.s.loadDailymotionThumbnail){thumbImg="//www.dailymotion.com/thumbnail/video/"+isVideo.dailymotion[1]}else{thumbImg=thumb}}}else{thumbImg=thumb}thumbList+='<div data-vimeo-id="'+vimeoId+'" class="lg-thumb-item" style="width:'+_this.core.s.thumbWidth+"px; margin-right: "+_this.core.s.thumbMargin+'px"><img src="'+thumbImg+'" /></div>';vimeoId=""}if(_this.core.s.dynamic){for(var i=0;i<_this.core.s.dynamicEl.length;i++){getThumb(_this.core.s.dynamicEl[i].src,_this.core.s.dynamicEl[i].thumb,i)}}else{_this.core.$items.each(function(i){if(!_this.core.s.exThumbImage){getThumb($(this).attr("href")||$(this).attr("data-src"),$(this).find("img").attr("src")||$(this).find("img").data("src"),i)}else{getThumb($(this).attr("href")||$(this).attr("data-src"),$(this).attr(_this.core.s.exThumbImage),i)}})}_this.core.$outer.find(".lg-thumb").html(thumbList);$thumb=_this.core.$outer.find(".lg-thumb-item");$thumb.each(function(){var $this=$(this);var vimeoVideoId=$this.attr("data-vimeo-id");if(vimeoVideoId){$.getJSON("//www.vimeo.com/api/v2/video/"+vimeoVideoId+".json?callback=?",{format:"json"},function(data){$this.find("img").attr("src",data[0][_this.core.s.vimeoThumbSize])})}});$thumb.eq(_this.core.index).addClass("active");_this.core.$el.on("onBeforeSlide.lg.tm",function(){$thumb.removeClass("active");$thumb.eq(_this.core.index).addClass("active")});$thumb.on("click.lg touchend.lg",function(){var _$this=$(this);setTimeout(function(){if(_this.thumbClickable&&!_this.core.lgBusy||!_this.core.doCss()){_this.core.index=_$this.index();_this.core.slide(_this.core.index,false,true,false)}},50)});_this.core.$el.on("onBeforeSlide.lg.tm",function(){_this.animateThumb(_this.core.index)});$(window).on("resize.lg.thumb orientationchange.lg.thumb",function(){setTimeout(function(){_this.animateThumb(_this.core.index);_this.thumbOuterWidth=_this.$thumbOuter.width()},200)})};Thumbnail.prototype.setTranslate=function(value){this.core.$outer.find(".lg-thumb").css({transform:"translate3d(-"+value+"px, 0px, 0px)"})};Thumbnail.prototype.animateThumb=function(index){var $thumb=this.core.$outer.find(".lg-thumb");if(this.core.s.animateThumb){var position;switch(this.core.s.currentPagerPosition){case"left":position=0;break;case"middle":position=this.thumbOuterWidth/2-this.core.s.thumbWidth/2;break;case"right":position=this.thumbOuterWidth-this.core.s.thumbWidth}this.left=(this.core.s.thumbWidth+this.core.s.thumbMargin)*index-1-position;if(this.left>this.thumbTotalWidth-this.thumbOuterWidth){this.left=this.thumbTotalWidth-this.thumbOuterWidth}if(this.left<0){this.left=0}if(this.core.lGalleryOn){if(!$thumb.hasClass("on")){this.core.$outer.find(".lg-thumb").css("transition-duration",this.core.s.speed+"ms")}if(!this.core.doCss()){$thumb.animate({left:-this.left+"px"},this.core.s.speed)}}else{if(!this.core.doCss()){$thumb.css("left",-this.left+"px")}}this.setTranslate(this.left)}};Thumbnail.prototype.enableThumbDrag=function(){var _this=this;var startCoords=0;var endCoords=0;var isDraging=false;var isMoved=false;var tempLeft=0;_this.$thumbOuter.addClass("lg-grab");_this.core.$outer.find(".lg-thumb").on("mousedown.lg.thumb",function(e){if(_this.thumbTotalWidth>_this.thumbOuterWidth){e.preventDefault();startCoords=e.pageX;isDraging=true;_this.core.$outer.scrollLeft+=1;_this.core.$outer.scrollLeft-=1;_this.thumbClickable=false;_this.$thumbOuter.removeClass("lg-grab").addClass("lg-grabbing")}});$(window).on("mousemove.lg.thumb",function(e){if(isDraging){tempLeft=_this.left;isMoved=true;endCoords=e.pageX;_this.$thumbOuter.addClass("lg-dragging");tempLeft=tempLeft-(endCoords-startCoords);if(tempLeft>_this.thumbTotalWidth-_this.thumbOuterWidth){tempLeft=_this.thumbTotalWidth-_this.thumbOuterWidth}if(tempLeft<0){tempLeft=0}_this.setTranslate(tempLeft)}});$(window).on("mouseup.lg.thumb",function(){if(isMoved){isMoved=false;_this.$thumbOuter.removeClass("lg-dragging");_this.left=tempLeft;if(Math.abs(endCoords-startCoords)<_this.core.s.swipeThreshold){_this.thumbClickable=true}}else{_this.thumbClickable=true}if(isDraging){isDraging=false;_this.$thumbOuter.removeClass("lg-grabbing").addClass("lg-grab")}})};Thumbnail.prototype.enableThumbSwipe=function(){var _this=this;var startCoords=0;var endCoords=0;var isMoved=false;var tempLeft=0;_this.core.$outer.find(".lg-thumb").on("touchstart.lg",function(e){if(_this.thumbTotalWidth>_this.thumbOuterWidth){e.preventDefault();startCoords=e.originalEvent.targetTouches[0].pageX;_this.thumbClickable=false}});_this.core.$outer.find(".lg-thumb").on("touchmove.lg",function(e){if(_this.thumbTotalWidth>_this.thumbOuterWidth){e.preventDefault();endCoords=e.originalEvent.targetTouches[0].pageX;isMoved=true;_this.$thumbOuter.addClass("lg-dragging");tempLeft=_this.left;tempLeft=tempLeft-(endCoords-startCoords);if(tempLeft>_this.thumbTotalWidth-_this.thumbOuterWidth){tempLeft=_this.thumbTotalWidth-_this.thumbOuterWidth}if(tempLeft<0){tempLeft=0}_this.setTranslate(tempLeft)}});_this.core.$outer.find(".lg-thumb").on("touchend.lg",function(){if(_this.thumbTotalWidth>_this.thumbOuterWidth){if(isMoved){isMoved=false;_this.$thumbOuter.removeClass("lg-dragging");if(Math.abs(endCoords-startCoords)<_this.core.s.swipeThreshold){_this.thumbClickable=true}_this.left=tempLeft}else{_this.thumbClickable=true}}else{_this.thumbClickable=true}})};Thumbnail.prototype.toogle=function(){var _this=this;if(_this.core.s.toogleThumb){_this.core.$outer.addClass("lg-can-toggle");_this.$thumbOuter.append('<span class="lg-toogle-thumb lg-icon"></span>');_this.core.$outer.find(".lg-toogle-thumb").on("click.lg",function(){_this.core.$outer.toggleClass("lg-thumb-open")})}};Thumbnail.prototype.thumbkeyPress=function(){var _this=this;$(window).on("keydown.lg.thumb",function(e){if(e.keyCode===38){e.preventDefault();_this.core.$outer.addClass("lg-thumb-open")}else if(e.keyCode===40){e.preventDefault();_this.core.$outer.removeClass("lg-thumb-open")}})};Thumbnail.prototype.destroy=function(){if(this.core.s.thumbnail&&this.core.$items.length>1){$(window).off("resize.lg.thumb orientationchange.lg.thumb keydown.lg.thumb");this.$thumbOuter.remove();this.core.$outer.removeClass("lg-has-thumb")}};$.fn.lightGallery.modules.Thumbnail=Thumbnail})();
(function(root,factory){if(typeof define==="function"&&define.amd){define(["jquery"],function(a0){return factory(a0)})}else if(typeof exports==="object"){module.exports=factory(require("jquery"))}else{factory(jQuery)}})(this,function($){(function(){"use strict";var getUseLeft=function(){var useLeft=false;var isChrome=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(isChrome&&parseInt(isChrome[2],10)<54){useLeft=true}return useLeft};var defaults={scale:1,zoom:true,actualSize:true,enableZoomAfter:300,useLeftForZoom:getUseLeft()};var Zoom=function(element){this.core=$(element).data("lightGallery");this.core.s=$.extend({},defaults,this.core.s);if(this.core.s.zoom&&this.core.doCss()){this.init();this.zoomabletimeout=false;this.pageX=$(window).width()/2;this.pageY=$(window).height()/2+$(window).scrollTop()}return this};Zoom.prototype.init=function(){var _this=this;var zoomIcons='<span id="lg-zoom-in" class="lg-icon"></span><span id="lg-zoom-out" class="lg-icon"></span>';if(_this.core.s.actualSize){zoomIcons+='<span id="lg-actual-size" class="lg-icon"></span>'}if(_this.core.s.useLeftForZoom){_this.core.$outer.addClass("lg-use-left-for-zoom")}else{_this.core.$outer.addClass("lg-use-transition-for-zoom")}this.core.$outer.find(".lg-toolbar").append(zoomIcons);_this.core.$el.on("onSlideItemLoad.lg.tm.zoom",function(event,index,delay){var _speed=_this.core.s.enableZoomAfter+delay;if($("body").hasClass("lg-from-hash")&&delay){_speed=0}else{$("body").removeClass("lg-from-hash")}_this.zoomabletimeout=setTimeout(function(){_this.core.$slide.eq(index).addClass("lg-zoomable")},_speed+30)});var scale=1;var zoom=function(scaleVal){var $image=_this.core.$outer.find(".lg-current .lg-image");var _x;var _y;var offsetX=($(window).width()-$image.prop("offsetWidth"))/2;var offsetY=($(window).height()-$image.prop("offsetHeight"))/2+$(window).scrollTop();_x=_this.pageX-offsetX;_y=_this.pageY-offsetY;var x=(scaleVal-1)*_x;var y=(scaleVal-1)*_y;$image.css("transform","scale3d("+scaleVal+", "+scaleVal+", 1)").attr("data-scale",scaleVal);if(_this.core.s.useLeftForZoom){$image.parent().css({left:-x+"px",top:-y+"px"}).attr("data-x",x).attr("data-y",y)}else{$image.parent().css("transform","translate3d(-"+x+"px, -"+y+"px, 0)").attr("data-x",x).attr("data-y",y)}};var callScale=function(){if(scale>1){_this.core.$outer.addClass("lg-zoomed")}else{_this.resetZoom()}if(scale<1){scale=1}zoom(scale)};var actualSize=function(event,$image,index,fromIcon){var w=$image.prop("offsetWidth");var nw;if(_this.core.s.dynamic){nw=_this.core.s.dynamicEl[index].width||$image[0].naturalWidth||w}else{nw=_this.core.$items.eq(index).attr("data-width")||$image[0].naturalWidth||w}var _scale;if(_this.core.$outer.hasClass("lg-zoomed")){scale=1}else{if(nw>w){_scale=nw/w;scale=_scale||2}}if(fromIcon){_this.pageX=$(window).width()/2;_this.pageY=$(window).height()/2+$(window).scrollTop()}else{_this.pageX=event.pageX||event.originalEvent.targetTouches[0].pageX;_this.pageY=event.pageY||event.originalEvent.targetTouches[0].pageY}callScale();setTimeout(function(){_this.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")},10)};var tapped=false;_this.core.$el.on("onAferAppendSlide.lg.tm.zoom",function(event,index){var $image=_this.core.$slide.eq(index).find(".lg-image");$image.on("dblclick",function(event){actualSize(event,$image,index)});$image.on("touchstart",function(event){if(!tapped){tapped=setTimeout(function(){tapped=null},300)}else{clearTimeout(tapped);tapped=null;actualSize(event,$image,index)}event.preventDefault()})});$(window).on("resize.lg.zoom scroll.lg.zoom orientationchange.lg.zoom",function(){_this.pageX=$(window).width()/2;_this.pageY=$(window).height()/2+$(window).scrollTop();zoom(scale)});$("#lg-zoom-out").on("click.lg",function(){if(_this.core.$outer.find(".lg-current .lg-image").length){scale-=_this.core.s.scale;callScale()}});$("#lg-zoom-in").on("click.lg",function(){if(_this.core.$outer.find(".lg-current .lg-image").length){scale+=_this.core.s.scale;callScale()}});$("#lg-actual-size").on("click.lg",function(event){actualSize(event,_this.core.$slide.eq(_this.core.index).find(".lg-image"),_this.core.index,true)});_this.core.$el.on("onBeforeSlide.lg.tm",function(){scale=1;_this.resetZoom()});if(!_this.core.isTouch){_this.zoomDrag()}if(_this.core.isTouch){_this.zoomSwipe()}};Zoom.prototype.resetZoom=function(){this.core.$outer.removeClass("lg-zoomed");this.core.$slide.find(".lg-img-wrap").removeAttr("style data-x data-y");this.core.$slide.find(".lg-image").removeAttr("style data-scale");this.pageX=$(window).width()/2;this.pageY=$(window).height()/2+$(window).scrollTop()};Zoom.prototype.zoomSwipe=function(){var _this=this;var startCoords={};var endCoords={};var isMoved=false;var allowX=false;var allowY=false;_this.core.$slide.on("touchstart.lg",function(e){if(_this.core.$outer.hasClass("lg-zoomed")){var $image=_this.core.$slide.eq(_this.core.index).find(".lg-object");allowY=$image.prop("offsetHeight")*$image.attr("data-scale")>_this.core.$outer.find(".lg").height();allowX=$image.prop("offsetWidth")*$image.attr("data-scale")>_this.core.$outer.find(".lg").width();if(allowX||allowY){e.preventDefault();startCoords={x:e.originalEvent.targetTouches[0].pageX,y:e.originalEvent.targetTouches[0].pageY}}}});_this.core.$slide.on("touchmove.lg",function(e){if(_this.core.$outer.hasClass("lg-zoomed")){var _$el=_this.core.$slide.eq(_this.core.index).find(".lg-img-wrap");var distanceX;var distanceY;e.preventDefault();isMoved=true;endCoords={x:e.originalEvent.targetTouches[0].pageX,y:e.originalEvent.targetTouches[0].pageY};_this.core.$outer.addClass("lg-zoom-dragging");if(allowY){distanceY=-Math.abs(_$el.attr("data-y"))+(endCoords.y-startCoords.y)}else{distanceY=-Math.abs(_$el.attr("data-y"))}if(allowX){distanceX=-Math.abs(_$el.attr("data-x"))+(endCoords.x-startCoords.x)}else{distanceX=-Math.abs(_$el.attr("data-x"))}if(Math.abs(endCoords.x-startCoords.x)>15||Math.abs(endCoords.y-startCoords.y)>15){if(_this.core.s.useLeftForZoom){_$el.css({left:distanceX+"px",top:distanceY+"px"})}else{_$el.css("transform","translate3d("+distanceX+"px, "+distanceY+"px, 0)")}}}});_this.core.$slide.on("touchend.lg",function(){if(_this.core.$outer.hasClass("lg-zoomed")){if(isMoved){isMoved=false;_this.core.$outer.removeClass("lg-zoom-dragging");_this.touchendZoom(startCoords,endCoords,allowX,allowY)}}})};Zoom.prototype.zoomDrag=function(){var _this=this;var startCoords={};var endCoords={};var isDraging=false;var isMoved=false;var allowX=false;var allowY=false;_this.core.$slide.on("mousedown.lg.zoom",function(e){var $image=_this.core.$slide.eq(_this.core.index).find(".lg-object");allowY=$image.prop("offsetHeight")*$image.attr("data-scale")>_this.core.$outer.find(".lg").height();allowX=$image.prop("offsetWidth")*$image.attr("data-scale")>_this.core.$outer.find(".lg").width();if(_this.core.$outer.hasClass("lg-zoomed")){if($(e.target).hasClass("lg-object")&&(allowX||allowY)){e.preventDefault();startCoords={x:e.pageX,y:e.pageY};isDraging=true;_this.core.$outer.scrollLeft+=1;_this.core.$outer.scrollLeft-=1;_this.core.$outer.removeClass("lg-grab").addClass("lg-grabbing")}}});$(window).on("mousemove.lg.zoom",function(e){if(isDraging){var _$el=_this.core.$slide.eq(_this.core.index).find(".lg-img-wrap");var distanceX;var distanceY;isMoved=true;endCoords={x:e.pageX,y:e.pageY};_this.core.$outer.addClass("lg-zoom-dragging");if(allowY){distanceY=-Math.abs(_$el.attr("data-y"))+(endCoords.y-startCoords.y)}else{distanceY=-Math.abs(_$el.attr("data-y"))}if(allowX){distanceX=-Math.abs(_$el.attr("data-x"))+(endCoords.x-startCoords.x)}else{distanceX=-Math.abs(_$el.attr("data-x"))}if(_this.core.s.useLeftForZoom){_$el.css({left:distanceX+"px",top:distanceY+"px"})}else{_$el.css("transform","translate3d("+distanceX+"px, "+distanceY+"px, 0)")}}});$(window).on("mouseup.lg.zoom",function(e){if(isDraging){isDraging=false;_this.core.$outer.removeClass("lg-zoom-dragging");if(isMoved&&(startCoords.x!==endCoords.x||startCoords.y!==endCoords.y)){endCoords={x:e.pageX,y:e.pageY};_this.touchendZoom(startCoords,endCoords,allowX,allowY)}isMoved=false}_this.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")})};Zoom.prototype.touchendZoom=function(startCoords,endCoords,allowX,allowY){var _this=this;var _$el=_this.core.$slide.eq(_this.core.index).find(".lg-img-wrap");var $image=_this.core.$slide.eq(_this.core.index).find(".lg-object");var distanceX=-Math.abs(_$el.attr("data-x"))+(endCoords.x-startCoords.x);var distanceY=-Math.abs(_$el.attr("data-y"))+(endCoords.y-startCoords.y);var minY=(_this.core.$outer.find(".lg").height()-$image.prop("offsetHeight"))/2;var maxY=Math.abs($image.prop("offsetHeight")*Math.abs($image.attr("data-scale"))-_this.core.$outer.find(".lg").height()+minY);var minX=(_this.core.$outer.find(".lg").width()-$image.prop("offsetWidth"))/2;var maxX=Math.abs($image.prop("offsetWidth")*Math.abs($image.attr("data-scale"))-_this.core.$outer.find(".lg").width()+minX);if(Math.abs(endCoords.x-startCoords.x)>15||Math.abs(endCoords.y-startCoords.y)>15){if(allowY){if(distanceY<=-maxY){distanceY=-maxY}else if(distanceY>=-minY){distanceY=-minY}}if(allowX){if(distanceX<=-maxX){distanceX=-maxX}else if(distanceX>=-minX){distanceX=-minX}}if(allowY){_$el.attr("data-y",Math.abs(distanceY))}else{distanceY=-Math.abs(_$el.attr("data-y"))}if(allowX){_$el.attr("data-x",Math.abs(distanceX))}else{distanceX=-Math.abs(_$el.attr("data-x"))}if(_this.core.s.useLeftForZoom){_$el.css({left:distanceX+"px",top:distanceY+"px"})}else{_$el.css("transform","translate3d("+distanceX+"px, "+distanceY+"px, 0)")}}};Zoom.prototype.destroy=function(){var _this=this;_this.core.$el.off(".lg.zoom");$(window).off(".lg.zoom");_this.core.$slide.off(".lg.zoom");_this.core.$el.off(".lg.tm.zoom");_this.resetZoom();clearTimeout(_this.zoomabletimeout);_this.zoomabletimeout=false};$.fn.lightGallery.modules.zoom=Zoom})()});
(function(){var numpf;numpf=function(n,f,s,t){var n10;n10=n%10;if(n10===1&&(n===1||n>20)){return f}else if(n10>1&&n10<5&&(n>20||n<10)){return s}else{return t}};jQuery.timeago.settings.strings={prefixAgo:"pre",prefixFromNow:"za",suffixAgo:null,suffixFromNow:null,second:"sekund",seconds:function(value){return numpf(value,"%d sekund","%d sekunde","%d sekundi")},minute:"oko minut",minutes:function(value){return numpf(value,"%d minut","%d minuta","%d minuta")},hour:"oko jedan sat",hours:function(value){return numpf(value,"%d sat","%d sata","%d sati")},day:"jedan dan",days:function(value){return numpf(value,"%d dan","%d dana","%d dana")},month:"mesec dana",months:function(value){return numpf(value,"%d mesec","%d meseca","%d meseci")},year:"godinu dana",years:function(value){return numpf(value,"%d godinu","%d godine","%d godina")},wordSeparator:" "}}).call(this);
var CryptoJS=CryptoJS||function(u,p){var d={},l=d.lib={},s=function(){},t=l.Base={extend:function(a){s.prototype=this;var c=new s;a&&c.mixIn(a);c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)});c.init.prototype=c;c.$super=this;return c},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},r=l.WordArray=t.extend({init:function(a,c){a=this.words=a||[];this.sigBytes=c!=p?c:4*a.length},toString:function(a){return(a||v).stringify(this)},concat:function(a){var c=this.words,e=a.words,j=this.sigBytes;a=a.sigBytes;this.clamp();if(j%4)for(var k=0;k<a;k++)c[j+k>>>2]|=(e[k>>>2]>>>24-8*(k%4)&255)<<24-8*((j+k)%4);else if(65535<e.length)for(k=0;k<a;k+=4)c[j+k>>>2]=e[k>>>2];else c.push.apply(c,e);this.sigBytes+=a;return this},clamp:function(){var a=this.words,c=this.sigBytes;a[c>>>2]&=4294967295<<32-8*(c%4);a.length=u.ceil(c/4)},clone:function(){var a=t.clone.call(this);a.words=this.words.slice(0);return a},random:function(a){for(var c=[],e=0;e<a;e+=4)c.push(4294967296*u.random()|0);return new r.init(c,a)}}),w=d.enc={},v=w.Hex={stringify:function(a){var c=a.words;a=a.sigBytes;for(var e=[],j=0;j<a;j++){var k=c[j>>>2]>>>24-8*(j%4)&255;e.push((k>>>4).toString(16));e.push((k&15).toString(16))}return e.join("")},parse:function(a){for(var c=a.length,e=[],j=0;j<c;j+=2)e[j>>>3]|=parseInt(a.substr(j,2),16)<<24-4*(j%8);return new r.init(e,c/2)}},b=w.Latin1={stringify:function(a){var c=a.words;a=a.sigBytes;for(var e=[],j=0;j<a;j++)e.push(String.fromCharCode(c[j>>>2]>>>24-8*(j%4)&255));return e.join("")},parse:function(a){for(var c=a.length,e=[],j=0;j<c;j++)e[j>>>2]|=(a.charCodeAt(j)&255)<<24-8*(j%4);return new r.init(e,c)}},x=w.Utf8={stringify:function(a){try{return decodeURIComponent(escape(b.stringify(a)))}catch(c){throw Error("Malformed UTF-8 data")}},parse:function(a){return b.parse(unescape(encodeURIComponent(a)))}},q=l.BufferedBlockAlgorithm=t.extend({reset:function(){this._data=new r.init;this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=x.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var c=this._data,e=c.words,j=c.sigBytes,k=this.blockSize,b=j/(4*k),b=a?u.ceil(b):u.max((b|0)-this._minBufferSize,0);a=b*k;j=u.min(4*a,j);if(a){for(var q=0;q<a;q+=k)this._doProcessBlock(e,q);q=e.splice(0,a);c.sigBytes-=j}return new r.init(q,j)},clone:function(){var a=t.clone.call(this);a._data=this._data.clone();return a},_minBufferSize:0});l.Hasher=q.extend({cfg:t.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){q.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,e){return new a.init(e).finalize(b)}},_createHmacHelper:function(a){return function(b,e){return new n.HMAC.init(a,e).finalize(b)}}});var n=d.algo={};return d}(Math);(function(){var u=CryptoJS,p=u.lib.WordArray;u.enc.Base64={stringify:function(d){var l=d.words,p=d.sigBytes,t=this._map;d.clamp();d=[];for(var r=0;r<p;r+=3)for(var w=(l[r>>>2]>>>24-8*(r%4)&255)<<16|(l[r+1>>>2]>>>24-8*((r+1)%4)&255)<<8|l[r+2>>>2]>>>24-8*((r+2)%4)&255,v=0;4>v&&r+.75*v<p;v++)d.push(t.charAt(w>>>6*(3-v)&63));if(l=t.charAt(64))for(;d.length%4;)d.push(l);return d.join("")},parse:function(d){var l=d.length,s=this._map,t=s.charAt(64);t&&(t=d.indexOf(t),-1!=t&&(l=t));for(var t=[],r=0,w=0;w<l;w++)if(w%4){var v=s.indexOf(d.charAt(w-1))<<2*(w%4),b=s.indexOf(d.charAt(w))>>>6-2*(w%4);t[r>>>2]|=(v|b)<<24-8*(r%4);r++}return p.create(t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(u){function p(b,n,a,c,e,j,k){b=b+(n&a|~n&c)+e+k;return(b<<j|b>>>32-j)+n}function d(b,n,a,c,e,j,k){b=b+(n&c|a&~c)+e+k;return(b<<j|b>>>32-j)+n}function l(b,n,a,c,e,j,k){b=b+(n^a^c)+e+k;return(b<<j|b>>>32-j)+n}function s(b,n,a,c,e,j,k){b=b+(a^(n|~c))+e+k;return(b<<j|b>>>32-j)+n}for(var t=CryptoJS,r=t.lib,w=r.WordArray,v=r.Hasher,r=t.algo,b=[],x=0;64>x;x++)b[x]=4294967296*u.abs(u.sin(x+1))|0;r=r.MD5=v.extend({_doReset:function(){this._hash=new w.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(q,n){for(var a=0;16>a;a++){var c=n+a,e=q[c];q[c]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360}var a=this._hash.words,c=q[n+0],e=q[n+1],j=q[n+2],k=q[n+3],z=q[n+4],r=q[n+5],t=q[n+6],w=q[n+7],v=q[n+8],A=q[n+9],B=q[n+10],C=q[n+11],u=q[n+12],D=q[n+13],E=q[n+14],x=q[n+15],f=a[0],m=a[1],g=a[2],h=a[3],f=p(f,m,g,h,c,7,b[0]),h=p(h,f,m,g,e,12,b[1]),g=p(g,h,f,m,j,17,b[2]),m=p(m,g,h,f,k,22,b[3]),f=p(f,m,g,h,z,7,b[4]),h=p(h,f,m,g,r,12,b[5]),g=p(g,h,f,m,t,17,b[6]),m=p(m,g,h,f,w,22,b[7]),f=p(f,m,g,h,v,7,b[8]),h=p(h,f,m,g,A,12,b[9]),g=p(g,h,f,m,B,17,b[10]),m=p(m,g,h,f,C,22,b[11]),f=p(f,m,g,h,u,7,b[12]),h=p(h,f,m,g,D,12,b[13]),g=p(g,h,f,m,E,17,b[14]),m=p(m,g,h,f,x,22,b[15]),f=d(f,m,g,h,e,5,b[16]),h=d(h,f,m,g,t,9,b[17]),g=d(g,h,f,m,C,14,b[18]),m=d(m,g,h,f,c,20,b[19]),f=d(f,m,g,h,r,5,b[20]),h=d(h,f,m,g,B,9,b[21]),g=d(g,h,f,m,x,14,b[22]),m=d(m,g,h,f,z,20,b[23]),f=d(f,m,g,h,A,5,b[24]),h=d(h,f,m,g,E,9,b[25]),g=d(g,h,f,m,k,14,b[26]),m=d(m,g,h,f,v,20,b[27]),f=d(f,m,g,h,D,5,b[28]),h=d(h,f,m,g,j,9,b[29]),g=d(g,h,f,m,w,14,b[30]),m=d(m,g,h,f,u,20,b[31]),f=l(f,m,g,h,r,4,b[32]),h=l(h,f,m,g,v,11,b[33]),g=l(g,h,f,m,C,16,b[34]),m=l(m,g,h,f,E,23,b[35]),f=l(f,m,g,h,e,4,b[36]),h=l(h,f,m,g,z,11,b[37]),g=l(g,h,f,m,w,16,b[38]),m=l(m,g,h,f,B,23,b[39]),f=l(f,m,g,h,D,4,b[40]),h=l(h,f,m,g,c,11,b[41]),g=l(g,h,f,m,k,16,b[42]),m=l(m,g,h,f,t,23,b[43]),f=l(f,m,g,h,A,4,b[44]),h=l(h,f,m,g,u,11,b[45]),g=l(g,h,f,m,x,16,b[46]),m=l(m,g,h,f,j,23,b[47]),f=s(f,m,g,h,c,6,b[48]),h=s(h,f,m,g,w,10,b[49]),g=s(g,h,f,m,E,15,b[50]),m=s(m,g,h,f,r,21,b[51]),f=s(f,m,g,h,u,6,b[52]),h=s(h,f,m,g,k,10,b[53]),g=s(g,h,f,m,B,15,b[54]),m=s(m,g,h,f,e,21,b[55]),f=s(f,m,g,h,v,6,b[56]),h=s(h,f,m,g,x,10,b[57]),g=s(g,h,f,m,t,15,b[58]),m=s(m,g,h,f,D,21,b[59]),f=s(f,m,g,h,z,6,b[60]),h=s(h,f,m,g,C,10,b[61]),g=s(g,h,f,m,j,15,b[62]),m=s(m,g,h,f,A,21,b[63]);a[0]=a[0]+f|0;a[1]=a[1]+m|0;a[2]=a[2]+g|0;a[3]=a[3]+h|0},_doFinalize:function(){var b=this._data,n=b.words,a=8*this._nDataBytes,c=8*b.sigBytes;n[c>>>5]|=128<<24-c%32;var e=u.floor(a/4294967296);n[(c+64>>>9<<4)+15]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360;n[(c+64>>>9<<4)+14]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360;b.sigBytes=4*(n.length+1);this._process();b=this._hash;n=b.words;for(a=0;4>a;a++)c=n[a],n[a]=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360;return b},clone:function(){var b=v.clone.call(this);b._hash=this._hash.clone();return b}});t.MD5=v._createHelper(r);t.HmacMD5=v._createHmacHelper(r)})(Math);(function(){var u=CryptoJS,p=u.lib,d=p.Base,l=p.WordArray,p=u.algo,s=p.EvpKDF=d.extend({cfg:d.extend({keySize:4,hasher:p.MD5,iterations:1}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,r){for(var p=this.cfg,s=p.hasher.create(),b=l.create(),u=b.words,q=p.keySize,p=p.iterations;u.length<q;){n&&s.update(n);var n=s.update(d).finalize(r);s.reset();for(var a=1;a<p;a++)n=s.finalize(n),s.reset();b.concat(n)}b.sigBytes=4*q;return b}});u.EvpKDF=function(d,l,p){return s.create(p).compute(d,l)}})();CryptoJS.lib.Cipher||function(u){var p=CryptoJS,d=p.lib,l=d.Base,s=d.WordArray,t=d.BufferedBlockAlgorithm,r=p.enc.Base64,w=p.algo.EvpKDF,v=d.Cipher=t.extend({cfg:l.extend(),createEncryptor:function(e,a){return this.create(this._ENC_XFORM_MODE,e,a)},createDecryptor:function(e,a){return this.create(this._DEC_XFORM_MODE,e,a)},init:function(e,a,b){this.cfg=this.cfg.extend(b);this._xformMode=e;this._key=a;this.reset()},reset:function(){t.reset.call(this);this._doReset()},process:function(e){this._append(e);return this._process()},finalize:function(e){e&&this._append(e);return this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(b,k,d){return("string"==typeof k?c:a).encrypt(e,b,k,d)},decrypt:function(b,k,d){return("string"==typeof k?c:a).decrypt(e,b,k,d)}}}});d.StreamCipher=v.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var b=p.mode={},x=function(e,a,b){var c=this._iv;c?this._iv=u:c=this._prevBlock;for(var d=0;d<b;d++)e[a+d]^=c[d]},q=(d.BlockCipherMode=l.extend({createEncryptor:function(e,a){return this.Encryptor.create(e,a)},createDecryptor:function(e,a){return this.Decryptor.create(e,a)},init:function(e,a){this._cipher=e;this._iv=a}})).extend();q.Encryptor=q.extend({processBlock:function(e,a){var b=this._cipher,c=b.blockSize;x.call(this,e,a,c);b.encryptBlock(e,a);this._prevBlock=e.slice(a,a+c)}});q.Decryptor=q.extend({processBlock:function(e,a){var b=this._cipher,c=b.blockSize,d=e.slice(a,a+c);b.decryptBlock(e,a);x.call(this,e,a,c);this._prevBlock=d}});b=b.CBC=q;q=(p.pad={}).Pkcs7={pad:function(a,b){for(var c=4*b,c=c-a.sigBytes%c,d=c<<24|c<<16|c<<8|c,l=[],n=0;n<c;n+=4)l.push(d);c=s.create(l,c);a.concat(c)},unpad:function(a){a.sigBytes-=a.words[a.sigBytes-1>>>2]&255}};d.BlockCipher=v.extend({cfg:v.cfg.extend({mode:b,padding:q}),reset:function(){v.reset.call(this);var a=this.cfg,b=a.iv,a=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var c=a.createEncryptor;else c=a.createDecryptor,this._minBufferSize=1;this._mode=c.call(a,this,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),a.unpad(b);return b},blockSize:4});var n=d.CipherParams=l.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}}),b=(p.format={}).OpenSSL={stringify:function(a){var b=a.ciphertext;a=a.salt;return(a?s.create([1398893684,1701076831]).concat(a).concat(b):b).toString(r)},parse:function(a){a=r.parse(a);var b=a.words;if(1398893684==b[0]&&1701076831==b[1]){var c=s.create(b.slice(2,4));b.splice(0,4);a.sigBytes-=16}return n.create({ciphertext:a,salt:c})}},a=d.SerializableCipher=l.extend({cfg:l.extend({format:b}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var l=a.createEncryptor(c,d);b=l.finalize(b);l=l.cfg;return n.create({ciphertext:b,key:c,iv:l.iv,algorithm:a,mode:l.mode,padding:l.padding,blockSize:a.blockSize,formatter:d.format})},decrypt:function(a,b,c,d){d=this.cfg.extend(d);b=this._parse(b,d.format);return a.createDecryptor(c,d).finalize(b.ciphertext)},_parse:function(a,b){return"string"==typeof a?b.parse(a,this):a}}),p=(p.kdf={}).OpenSSL={execute:function(a,b,c,d){d||(d=s.random(8));a=w.create({keySize:b+c}).compute(a,d);c=s.create(a.words.slice(b),4*c);a.sigBytes=4*b;return n.create({key:a,iv:c,salt:d})}},c=d.PasswordBasedCipher=a.extend({cfg:a.cfg.extend({kdf:p}),encrypt:function(b,c,d,l){l=this.cfg.extend(l);d=l.kdf.execute(d,b.keySize,b.ivSize);l.iv=d.iv;b=a.encrypt.call(this,b,c,d.key,l);b.mixIn(d);return b},decrypt:function(b,c,d,l){l=this.cfg.extend(l);c=this._parse(c,l.format);d=l.kdf.execute(d,b.keySize,b.ivSize,c.salt);l.iv=d.iv;return a.decrypt.call(this,b,c,d.key,l)}})}();(function(){for(var u=CryptoJS,p=u.lib.BlockCipher,d=u.algo,l=[],s=[],t=[],r=[],w=[],v=[],b=[],x=[],q=[],n=[],a=[],c=0;256>c;c++)a[c]=128>c?c<<1:c<<1^283;for(var e=0,j=0,c=0;256>c;c++){var k=j^j<<1^j<<2^j<<3^j<<4,k=k>>>8^k&255^99;l[e]=k;s[k]=e;var z=a[e],F=a[z],G=a[F],y=257*a[k]^16843008*k;t[e]=y<<24|y>>>8;r[e]=y<<16|y>>>16;w[e]=y<<8|y>>>24;v[e]=y;y=16843009*G^65537*F^257*z^16843008*e;b[k]=y<<24|y>>>8;x[k]=y<<16|y>>>16;q[k]=y<<8|y>>>24;n[k]=y;e?(e=z^a[a[a[G^z]]],j^=a[a[j]]):e=j=1}var H=[0,1,2,4,8,16,32,64,128,27,54],d=d.AES=p.extend({_doReset:function(){for(var a=this._key,c=a.words,d=a.sigBytes/4,a=4*((this._nRounds=d+6)+1),e=this._keySchedule=[],j=0;j<a;j++)if(j<d)e[j]=c[j];else{var k=e[j-1];j%d?6<d&&4==j%d&&(k=l[k>>>24]<<24|l[k>>>16&255]<<16|l[k>>>8&255]<<8|l[k&255]):(k=k<<8|k>>>24,k=l[k>>>24]<<24|l[k>>>16&255]<<16|l[k>>>8&255]<<8|l[k&255],k^=H[j/d|0]<<24);e[j]=e[j-d]^k}c=this._invKeySchedule=[];for(d=0;d<a;d++)j=a-d,k=d%4?e[j]:e[j-4],c[d]=4>d||4>=j?k:b[l[k>>>24]]^x[l[k>>>16&255]]^q[l[k>>>8&255]]^n[l[k&255]]},encryptBlock:function(a,b){this._doCryptBlock(a,b,this._keySchedule,t,r,w,v,l)},decryptBlock:function(a,c){var d=a[c+1];a[c+1]=a[c+3];a[c+3]=d;this._doCryptBlock(a,c,this._invKeySchedule,b,x,q,n,s);d=a[c+1];a[c+1]=a[c+3];a[c+3]=d},_doCryptBlock:function(a,b,c,d,e,j,l,f){for(var m=this._nRounds,g=a[b]^c[0],h=a[b+1]^c[1],k=a[b+2]^c[2],n=a[b+3]^c[3],p=4,r=1;r<m;r++)var q=d[g>>>24]^e[h>>>16&255]^j[k>>>8&255]^l[n&255]^c[p++],s=d[h>>>24]^e[k>>>16&255]^j[n>>>8&255]^l[g&255]^c[p++],t=d[k>>>24]^e[n>>>16&255]^j[g>>>8&255]^l[h&255]^c[p++],n=d[n>>>24]^e[g>>>16&255]^j[h>>>8&255]^l[k&255]^c[p++],g=q,h=s,k=t;q=(f[g>>>24]<<24|f[h>>>16&255]<<16|f[k>>>8&255]<<8|f[n&255])^c[p++];s=(f[h>>>24]<<24|f[k>>>16&255]<<16|f[n>>>8&255]<<8|f[g&255])^c[p++];t=(f[k>>>24]<<24|f[n>>>16&255]<<16|f[g>>>8&255]<<8|f[h&255])^c[p++];n=(f[n>>>24]<<24|f[g>>>16&255]<<16|f[h>>>8&255]<<8|f[k&255])^c[p++];a[b]=q;a[b+1]=s;a[b+2]=t;a[b+3]=n},keySize:8});u.AES=p._createHelper(d)})();
var CryptoJS=CryptoJS||function(a,j){var c={},b=c.lib={},f=function(){},l=b.Base={extend:function(a){f.prototype=this;var d=new f;a&&d.mixIn(a);d.hasOwnProperty("init")||(d.init=function(){d.$super.init.apply(this,arguments)});d.init.prototype=d;d.$super=this;return d},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var d in a)a.hasOwnProperty(d)&&(this[d]=a[d]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},u=b.WordArray=l.extend({init:function(a,d){a=this.words=a||[];this.sigBytes=d!=j?d:4*a.length},toString:function(a){return(a||m).stringify(this)},concat:function(a){var d=this.words,M=a.words,e=this.sigBytes;a=a.sigBytes;this.clamp();if(e%4)for(var b=0;b<a;b++)d[e+b>>>2]|=(M[b>>>2]>>>24-8*(b%4)&255)<<24-8*((e+b)%4);else if(65535<M.length)for(b=0;b<a;b+=4)d[e+b>>>2]=M[b>>>2];else d.push.apply(d,M);this.sigBytes+=a;return this},clamp:function(){var D=this.words,d=this.sigBytes;D[d>>>2]&=4294967295<<32-8*(d%4);D.length=a.ceil(d/4)},clone:function(){var a=l.clone.call(this);a.words=this.words.slice(0);return a},random:function(D){for(var d=[],b=0;b<D;b+=4)d.push(4294967296*a.random()|0);return new u.init(d,D)}}),k=c.enc={},m=k.Hex={stringify:function(a){var d=a.words;a=a.sigBytes;for(var b=[],e=0;e<a;e++){var c=d[e>>>2]>>>24-8*(e%4)&255;b.push((c>>>4).toString(16));b.push((c&15).toString(16))}return b.join("")},parse:function(a){for(var d=a.length,b=[],e=0;e<d;e+=2)b[e>>>3]|=parseInt(a.substr(e,2),16)<<24-4*(e%8);return new u.init(b,d/2)}},y=k.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],e=0;e<a;e++)c.push(String.fromCharCode(b[e>>>2]>>>24-8*(e%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],e=0;e<b;e++)c[e>>>2]|=(a.charCodeAt(e)&255)<<24-8*(e%4);return new u.init(c,b)}},z=k.Utf8={stringify:function(a){try{return decodeURIComponent(escape(y.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return y.parse(unescape(encodeURIComponent(a)))}},x=b.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new u.init;this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=z.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(b){var d=this._data,c=d.words,e=d.sigBytes,l=this.blockSize,k=e/(4*l),k=b?a.ceil(k):a.max((k|0)-this._minBufferSize,0);b=k*l;e=a.min(4*b,e);if(b){for(var x=0;x<b;x+=l)this._doProcessBlock(c,x);x=c.splice(0,b);d.sigBytes-=e}return new u.init(x,e)},clone:function(){var a=l.clone.call(this);a._data=this._data.clone();return a},_minBufferSize:0});b.Hasher=x.extend({cfg:l.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){x.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new ja.HMAC.init(a,c).finalize(b)}}});var ja=c.algo={};return c}(Math);(function(a){var j=CryptoJS,c=j.lib,b=c.Base,f=c.WordArray,j=j.x64={};j.Word=b.extend({init:function(a,b){this.high=a;this.low=b}});j.WordArray=b.extend({init:function(b,c){b=this.words=b||[];this.sigBytes=c!=a?c:8*b.length},toX32:function(){for(var a=this.words,b=a.length,c=[],m=0;m<b;m++){var y=a[m];c.push(y.high);c.push(y.low)}return f.create(c,this.sigBytes)},clone:function(){for(var a=b.clone.call(this),c=a.words=this.words.slice(0),k=c.length,f=0;f<k;f++)c[f]=c[f].clone();return a}})})();(function(){function a(){return f.create.apply(f,arguments)}for(var j=CryptoJS,c=j.lib.Hasher,b=j.x64,f=b.Word,l=b.WordArray,b=j.algo,u=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],k=[],m=0;80>m;m++)k[m]=a();b=b.SHA512=c.extend({_doReset:function(){this._hash=new l.init([new f.init(1779033703,4089235720),new f.init(3144134277,2227873595),new f.init(1013904242,4271175723),new f.init(2773480762,1595750129),new f.init(1359893119,2917565137),new f.init(2600822924,725511199),new f.init(528734635,4215389547),new f.init(1541459225,327033209)])},_doProcessBlock:function(a,b){for(var c=this._hash.words,f=c[0],j=c[1],d=c[2],l=c[3],e=c[4],m=c[5],N=c[6],c=c[7],aa=f.high,O=f.low,ba=j.high,P=j.low,ca=d.high,Q=d.low,da=l.high,R=l.low,ea=e.high,S=e.low,fa=m.high,T=m.low,ga=N.high,U=N.low,ha=c.high,V=c.low,r=aa,n=O,G=ba,E=P,H=ca,F=Q,Y=da,I=R,s=ea,p=S,W=fa,J=T,X=ga,K=U,Z=ha,L=V,t=0;80>t;t++){var A=k[t];if(16>t)var q=A.high=a[b+2*t]|0,g=A.low=a[b+2*t+1]|0;else{var q=k[t-15],g=q.high,v=q.low,q=(g>>>1|v<<31)^(g>>>8|v<<24)^g>>>7,v=(v>>>1|g<<31)^(v>>>8|g<<24)^(v>>>7|g<<25),C=k[t-2],g=C.high,h=C.low,C=(g>>>19|h<<13)^(g<<3|h>>>29)^g>>>6,h=(h>>>19|g<<13)^(h<<3|g>>>29)^(h>>>6|g<<26),g=k[t-7],$=g.high,B=k[t-16],w=B.high,B=B.low,g=v+g.low,q=q+$+(g>>>0<v>>>0?1:0),g=g+h,q=q+C+(g>>>0<h>>>0?1:0),g=g+B,q=q+w+(g>>>0<B>>>0?1:0);A.high=q;A.low=g}var $=s&W^~s&X,B=p&J^~p&K,A=r&G^r&H^G&H,ka=n&E^n&F^E&F,v=(r>>>28|n<<4)^(r<<30|n>>>2)^(r<<25|n>>>7),C=(n>>>28|r<<4)^(n<<30|r>>>2)^(n<<25|r>>>7),h=u[t],la=h.high,ia=h.low,h=L+((p>>>14|s<<18)^(p>>>18|s<<14)^(p<<23|s>>>9)),w=Z+((s>>>14|p<<18)^(s>>>18|p<<14)^(s<<23|p>>>9))+(h>>>0<L>>>0?1:0),h=h+B,w=w+$+(h>>>0<B>>>0?1:0),h=h+ia,w=w+la+(h>>>0<ia>>>0?1:0),h=h+g,w=w+q+(h>>>0<g>>>0?1:0),g=C+ka,A=v+A+(g>>>0<C>>>0?1:0),Z=X,L=K,X=W,K=J,W=s,J=p,p=I+h|0,s=Y+w+(p>>>0<I>>>0?1:0)|0,Y=H,I=F,H=G,F=E,G=r,E=n,n=h+g|0,r=w+A+(n>>>0<h>>>0?1:0)|0}O=f.low=O+n;f.high=aa+r+(O>>>0<n>>>0?1:0);P=j.low=P+E;j.high=ba+G+(P>>>0<E>>>0?1:0);Q=d.low=Q+F;d.high=ca+H+(Q>>>0<F>>>0?1:0);R=l.low=R+I;l.high=da+Y+(R>>>0<I>>>0?1:0);S=e.low=S+p;e.high=ea+s+(S>>>0<p>>>0?1:0);T=m.low=T+J;m.high=fa+W+(T>>>0<J>>>0?1:0);U=N.low=U+K;N.high=ga+X+(U>>>0<K>>>0?1:0);V=c.low=V+L;c.high=ha+Z+(V>>>0<L>>>0?1:0)},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,f=8*a.sigBytes;b[f>>>5]|=128<<24-f%32;b[(f+128>>>10<<5)+30]=Math.floor(c/4294967296);b[(f+128>>>10<<5)+31]=c;a.sigBytes=4*b.length;this._process();return this._hash.toX32()},clone:function(){var a=c.clone.call(this);a._hash=this._hash.clone();return a},blockSize:32});j.SHA512=c._createHelper(b);j.HmacSHA512=c._createHmacHelper(b)})();(function(){var a=CryptoJS,j=a.enc.Utf8;a.algo.HMAC=a.lib.Base.extend({init:function(a,b){a=this._hasher=new a.init;"string"==typeof b&&(b=j.parse(b));var f=a.blockSize,l=4*f;b.sigBytes>l&&(b=a.finalize(b));b.clamp();for(var u=this._oKey=b.clone(),k=this._iKey=b.clone(),m=u.words,y=k.words,z=0;z<f;z++)m[z]^=1549556828,y[z]^=909522486;u.sigBytes=k.sigBytes=l;this.reset()},reset:function(){var a=this._hasher;a.reset();a.update(this._iKey)},update:function(a){this._hasher.update(a);return this},finalize:function(a){var b=this._hasher;a=b.finalize(a);b.reset();return b.finalize(this._oKey.clone().concat(a))}})})();
var CryptoJS=CryptoJS||function(g,j){var e={},d=e.lib={},m=function(){},n=d.Base={extend:function(a){m.prototype=this;var c=new m;a&&c.mixIn(a);c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)});c.init.prototype=c;c.$super=this;return c},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},q=d.WordArray=n.extend({init:function(a,c){a=this.words=a||[];this.sigBytes=c!=j?c:4*a.length},toString:function(a){return(a||l).stringify(this)},concat:function(a){var c=this.words,p=a.words,f=this.sigBytes;a=a.sigBytes;this.clamp();if(f%4)for(var b=0;b<a;b++)c[f+b>>>2]|=(p[b>>>2]>>>24-8*(b%4)&255)<<24-8*((f+b)%4);else if(65535<p.length)for(b=0;b<a;b+=4)c[f+b>>>2]=p[b>>>2];else c.push.apply(c,p);this.sigBytes+=a;return this},clamp:function(){var a=this.words,c=this.sigBytes;a[c>>>2]&=4294967295<<32-8*(c%4);a.length=g.ceil(c/4)},clone:function(){var a=n.clone.call(this);a.words=this.words.slice(0);return a},random:function(a){for(var c=[],b=0;b<a;b+=4)c.push(4294967296*g.random()|0);return new q.init(c,a)}}),b=e.enc={},l=b.Hex={stringify:function(a){var c=a.words;a=a.sigBytes;for(var b=[],f=0;f<a;f++){var d=c[f>>>2]>>>24-8*(f%4)&255;b.push((d>>>4).toString(16));b.push((d&15).toString(16))}return b.join("")},parse:function(a){for(var c=a.length,b=[],f=0;f<c;f+=2)b[f>>>3]|=parseInt(a.substr(f,2),16)<<24-4*(f%8);return new q.init(b,c/2)}},k=b.Latin1={stringify:function(a){var c=a.words;a=a.sigBytes;for(var b=[],f=0;f<a;f++)b.push(String.fromCharCode(c[f>>>2]>>>24-8*(f%4)&255));return b.join("")},parse:function(a){for(var c=a.length,b=[],f=0;f<c;f++)b[f>>>2]|=(a.charCodeAt(f)&255)<<24-8*(f%4);return new q.init(b,c)}},h=b.Utf8={stringify:function(a){try{return decodeURIComponent(escape(k.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return k.parse(unescape(encodeURIComponent(a)))}},u=d.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new q.init;this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=h.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var b=this._data,d=b.words,f=b.sigBytes,l=this.blockSize,e=f/(4*l),e=a?g.ceil(e):g.max((e|0)-this._minBufferSize,0);a=e*l;f=g.min(4*a,f);if(a){for(var h=0;h<a;h+=l)this._doProcessBlock(d,h);h=d.splice(0,a);b.sigBytes-=f}return new q.init(h,f)},clone:function(){var a=n.clone.call(this);a._data=this._data.clone();return a},_minBufferSize:0});d.Hasher=u.extend({cfg:n.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){u.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,d){return new a.init(d).finalize(b)}},_createHmacHelper:function(a){return function(b,d){return new w.HMAC.init(a,d).finalize(b)}}});var w=e.algo={};return e}(Math);(function(){var g=CryptoJS,j=g.lib,e=j.WordArray,d=j.Hasher,m=[],j=g.algo.SHA1=d.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(d,e){for(var b=this._hash.words,l=b[0],k=b[1],h=b[2],g=b[3],j=b[4],a=0;80>a;a++){if(16>a)m[a]=d[e+a]|0;else{var c=m[a-3]^m[a-8]^m[a-14]^m[a-16];m[a]=c<<1|c>>>31}c=(l<<5|l>>>27)+j+m[a];c=20>a?c+((k&h|~k&g)+1518500249):40>a?c+((k^h^g)+1859775393):60>a?c+((k&h|k&g|h&g)-1894007588):c+((k^h^g)-899497514);j=g;g=h;h=k<<30|k>>>2;k=l;l=c}b[0]=b[0]+l|0;b[1]=b[1]+k|0;b[2]=b[2]+h|0;b[3]=b[3]+g|0;b[4]=b[4]+j|0},_doFinalize:function(){var d=this._data,e=d.words,b=8*this._nDataBytes,l=8*d.sigBytes;e[l>>>5]|=128<<24-l%32;e[(l+64>>>9<<4)+14]=Math.floor(b/4294967296);e[(l+64>>>9<<4)+15]=b;d.sigBytes=4*e.length;this._process();return this._hash},clone:function(){var e=d.clone.call(this);e._hash=this._hash.clone();return e}});g.SHA1=d._createHelper(j);g.HmacSHA1=d._createHmacHelper(j)})();(function(){var g=CryptoJS,j=g.enc.Utf8;g.algo.HMAC=g.lib.Base.extend({init:function(e,d){e=this._hasher=new e.init;"string"==typeof d&&(d=j.parse(d));var g=e.blockSize,n=4*g;d.sigBytes>n&&(d=e.finalize(d));d.clamp();for(var q=this._oKey=d.clone(),b=this._iKey=d.clone(),l=q.words,k=b.words,h=0;h<g;h++)l[h]^=1549556828,k[h]^=909522486;q.sigBytes=b.sigBytes=n;this.reset()},reset:function(){var e=this._hasher;e.reset();e.update(this._iKey)},update:function(e){this._hasher.update(e);return this},finalize:function(e){var d=this._hasher;e=d.finalize(e);d.reset();return d.finalize(this._oKey.clone().concat(e))}})})();(function(){var g=CryptoJS,j=g.lib,e=j.Base,d=j.WordArray,j=g.algo,m=j.HMAC,n=j.PBKDF2=e.extend({cfg:e.extend({keySize:4,hasher:j.SHA1,iterations:1}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(e,b){for(var g=this.cfg,k=m.create(g.hasher,e),h=d.create(),j=d.create([1]),n=h.words,a=j.words,c=g.keySize,g=g.iterations;n.length<c;){var p=k.update(b).finalize(j);k.reset();for(var f=p.words,v=f.length,s=p,t=1;t<g;t++){s=k.finalize(s);k.reset();for(var x=s.words,r=0;r<v;r++)f[r]^=x[r]}h.concat(p);a[0]++}h.sigBytes=4*c;return h}});g.PBKDF2=function(d,b,e){return n.create(e).compute(d,b)}})();
function CryptoJSAesDecrypt(passphrase,encrypted_json_string){var obj_json=JSON.parse(encrypted_json_string);var encrypted=obj_json.ciphertext;var salt=CryptoJS.enc.Hex.parse(obj_json.salt);var iv=CryptoJS.enc.Hex.parse(obj_json.iv);var key=CryptoJS.PBKDF2(passphrase,salt,{hasher:CryptoJS.algo.SHA512,keySize:64/8,iterations:999});var decrypted=CryptoJS.AES.decrypt(encrypted,key,{iv:iv});return decrypted.toString(CryptoJS.enc.Utf8)}function CryptoJSAesEncrypt(passphrase,plain_text){var salt=CryptoJS.lib.WordArray.random(256);var iv=CryptoJS.lib.WordArray.random(16);var key=CryptoJS.PBKDF2(passphrase,salt,{hasher:CryptoJS.algo.SHA512,keySize:64/8,iterations:999});var encrypted=CryptoJS.AES.encrypt(plain_text,key,{iv:iv});var data={ciphertext:CryptoJS.enc.Base64.stringify(encrypted.ciphertext),salt:CryptoJS.enc.Hex.stringify(salt),iv:CryptoJS.enc.Hex.stringify(iv)};return JSON.stringify(data)}